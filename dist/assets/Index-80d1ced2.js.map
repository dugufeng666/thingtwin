{"version":3,"file":"Index-80d1ced2.js","sources":["../../node_modules/file-saver/dist/FileSaver.min.js","../../src/components/Header.vue","../../src/components/Graphics.vue","../../src/components/FileProps.vue","../../src/components/PenProps.vue","../../src/components/Props.vue","../../src/views/Index.vue"],"sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","<template>\n  <div class=\"app-header\">\n    \n    <t-dropdown\n      :minColumnWidth=\"200\"\n      :maxHeight=\"560\"\n      overlayClassName=\"header-dropdown\"\n    >\n    <span>数字孪生编辑器</span>\n  </t-dropdown>\n    \n    \n    <t-dropdown\n      :minColumnWidth=\"200\"\n      :maxHeight=\"560\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a> 文件 </a>\n      <t-dropdown-menu>\n        <t-dropdown-item @click=\"newFile\">\n          <a>新建文件</a>\n        </t-dropdown-item>\n        <t-dropdown-item @click=\"openFile\" divider=\"true\">\n          <a>打开文件</a>\n        </t-dropdown-item>\n\n        <t-dropdown-item divider=\"true\">\n          <a @click=\"downloadJson\">下载JSON文件</a>\n        </t-dropdown-item>\n\n        <t-dropdown-item>\n          <a @click=\"downloadPng\">下载为PNG</a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"downloadSvg\">下载为SVG</a>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <t-dropdown\n      :minColumnWidth=\"180\"\n      :maxHeight=\"500\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a> 编辑 </a>\n      <t-dropdown-menu>\n        <t-dropdown-item>\n          <a @click=\"onUndo\">\n            <div class=\"flex\">\n              撤销 <span class=\"flex-grow\"></span> Ctrl + Z\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item divider=\"true\">\n          <a @click=\"onRedo\">\n            <div class=\"flex\">\n              恢复 <span class=\"flex-grow\"></span> Ctrl + Y\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onCut\">\n            <div class=\"flex\">\n              剪切 <span class=\"flex-grow\"></span> Ctrl + X\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onCopy\">\n            <div class=\"flex\">\n              复制 <span class=\"flex-grow\"></span> Ctrl + C\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item divider=\"true\">\n          <a @click=\"onPaste\">\n            <div class=\"flex\">\n              粘贴 <span class=\"flex-grow\"></span> Ctrl + V\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onAll\">\n            <div class=\"flex\">\n              全选 <span class=\"flex-grow\"></span> Ctrl + A\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onDelete\">\n            <div class=\"flex\">删除 <span class=\"flex-grow\"></span> DELETE</div>\n          </a>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n  </div>\n  <div class=\"app-header\">\n    <t-tooltip content=\"撤销\">\n      <svg class=\"l-icon\" aria-hidden=\"true\" @click=\"onUndo\">\n        <use xlink:href=\"#l-undo\"></use>\n      </svg>\n    </t-tooltip>\n    <t-tooltip content=\"重做\">\n      <svg class=\"l-icon\" aria-hidden=\"true\" @click=\"onRedo\">\n        <use xlink:href=\"#l-redo\"></use>\n      </svg>\n    </t-tooltip>\n    \n    <t-tooltip content=\"直线\">\n      <span\n        :draggable=\"true\"\n        @dragstart=\"onAddShape($event, 'line')\"\n        @click=\"onAddShape($event, 'line')\"\n      >\n        <t-icon name=\"slash\" />\n      </span>\n    </t-tooltip>\n    <t-tooltip content=\"文字\">\n      <span\n        :draggable=\"true\"\n        @dragstart=\"onAddShape($event, 'text')\"\n        @click=\"onAddShape($event, 'text')\"\n      >\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use xlink:href=\"#l-text\"></use>\n        </svg>\n      </span>\n    </t-tooltip>\n    <t-tooltip content=\"连线\">\n      <svg\n        width=\"1em\"\n        height=\"1em\"\n        viewBox=\"0 0 1024 1024\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        @click=\"drawLine\"\n        :style=\"{\n          color: isDrawLine ? ' #1677ff' : '',\n        }\"\n      >\n        <path\n          d=\"M192 64a128 128 0 0 1 123.968 96H384a160 160 0 0 1 159.68 149.504L544 320v384a96 96 0 0 0 86.784 95.552L640 800h68.032a128 128 0 1 1 0 64.064L640 864a160 160 0 0 1-159.68-149.504L480 704V320a96 96 0 0 0-86.784-95.552L384 224l-68.032 0.064A128 128 0 1 1 192 64z m640 704a64 64 0 1 0 0 128 64 64 0 0 0 0-128zM192 128a64 64 0 1 0 0 128 64 64 0 0 0 0-128z\"\n          fill=\"currentColor\"\n        ></path>\n      </svg>\n    </t-tooltip>\n    <t-dropdown\n      :minColumnWidth=\"160\"\n      :maxHeight=\"560\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a>\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use\n            :xlink:href=\"\n              lineTypes.find((item: LineType) => item.value === currentLineType)?.icon\n            \"\n          ></use>\n        </svg>\n      </a>\n      <t-dropdown-menu>\n        <t-dropdown-item v-for=\"item in lineTypes\">\n          <div class=\"flex middle\" @click=\"changeLineType(item.value)\">\n            {{ item.name }} <span class=\"flex-grow\"></span>\n            <svg class=\"l-icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"item.icon\"></use>\n            </svg>\n          </div>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <t-dropdown\n      :minColumnWidth=\"160\"\n      :maxHeight=\"560\"\n      :delay2=\"[10, 150]\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a>\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use\n            :xlink:href=\"\n              fromArrows.find((item: Arrow) => item.value === fromArrow)?.icon\n            \"\n          ></use>\n        </svg>\n      </a>\n      <t-dropdown-menu>\n        <t-dropdown-item v-for=\"item in fromArrows\">\n          <div\n            class=\"flex middle\"\n            style=\"height: 30px\"\n            @click=\"changeFromArrow(item.value)\"\n          >\n            <svg class=\"l-icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"item.icon\"></use>\n            </svg>\n          </div>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <t-dropdown\n      :minColumnWidth=\"160\"\n      :maxHeight=\"560\"\n      :delay2=\"[10, 150]\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a>\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use\n            :xlink:href=\"toArrows.find((item: Arrow) => item.value === toArrow)?.icon\"\n          ></use>\n        </svg>\n      </a>\n      <t-dropdown-menu>\n        <t-dropdown-item v-for=\"item in toArrows\">\n          <div\n            class=\"flex middle\"\n            style=\"height: 30px\"\n            @click=\"changeToArrow(item.value)\"\n          >\n            <svg class=\"l-icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"item.icon\"></use>\n            </svg>\n          </div>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <div style=\"width: 64px\"></div>\n    <div v-show=\"scale > 0\" style=\"line-height: 40px\">{{ scale }}%</div>\n    <t-tooltip content=\"100%视图\" placement=\"bottom\">\n      <a @click=\"onScaleDefault\"><t-icon name=\"refresh\" /></a>\n    </t-tooltip>\n    <t-tooltip content=\"窗口大小\" placement=\"bottom\">\n      <a @click=\"onScaleWindow\" style=\"margin-left: -16px\"\n        ><t-icon name=\"fullscreen-exit\"\n      /></a>\n    </t-tooltip>\n    <div style=\"width: 36px\"></div>\n    <t-tooltip content=\"运行查看\">\n      <t-icon name=\"play-circle-stroke\" @click=\"onView\" />\n    </t-tooltip>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { onMounted, reactive, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { Pen, PenType, deepClone } from '@meta2d/core';\n// @ts-ignore\nimport FileSaver from 'file-saver';\nimport { MessagePlugin } from 'tdesign-vue-next';\n\nconst router = useRouter();\n\nconst isDrawLine = ref<boolean>(false);\n\nconst scale = ref(0);\n\nonMounted(() => {\n  const timer = setInterval(() => {\n    if (meta2d) {\n      clearInterval(timer);\n      // 获取初始缩放比例\n      scaleSubscriber(meta2d.store.data.scale);\n\n      // 监听缩放\n      // @ts-ignore\n      meta2d.on('scale', scaleSubscriber);\n    }\n  }, 200);\n});\n\nconst scaleSubscriber = (val: number) => {\n  scale.value = Math.round(val * 100);\n};\n\nconst drawLine = () => {\n  if (isDrawLine.value) {\n    isDrawLine.value = false;\n    meta2d.finishDrawLine();\n    meta2d.drawLine();\n    meta2d.store.options.disableAnchor = true;\n  } else {\n    isDrawLine.value = true;\n    meta2d.drawLine(meta2d.store.options.drawingLineName);\n    meta2d.store.options.disableAnchor = false;\n  }\n};\n\nconst lineTypes = reactive([\n  { name: '曲线', icon: '#l-curve2', value: 'curve' },\n  { name: '线段', icon: '#l-polyline', value: 'polyline' },\n  { name: '直线', icon: '#l-line', value: 'line' },\n  { name: '脑图曲线', icon: '#l-mind', value: 'mind' },\n] as const);\n\ninterface LineType {\n  name: string;\n  icon: string;\n  value: string;\n}\n\ninterface Arrow {\n  icon: string;\n  value: string;\n}\n\nconst currentLineType = ref('curve');\n\nconst changeLineType = (value: string) => {\n  currentLineType.value = value;\n  if (meta2d) {\n    meta2d.store.options.drawingLineName = value;\n    meta2d.canvas.drawingLineName && (meta2d.canvas.drawingLineName = value);\n    meta2d.store.active?.forEach((pen) => {\n      meta2d.updateLineType(pen, value);\n    });\n  }\n};\n\nconst fromArrow = ref('');\nconst fromArrows: Arrow[] = [\n  { icon: '#l-line', value: '' },\n  { icon: '#l-from-triangle', value: 'triangle' },\n  { icon: '#l-from-diamond', value: 'diamond' },\n  { icon: '#l-from-circle', value: 'circle' },\n  { icon: '#l-from-lineDown', value: 'lineDown' },\n  { icon: '#l-from-lineUp', value: 'lineUp' },\n  { icon: '#l-from-triangleSolid', value: 'triangleSolid' },\n  { icon: '#l-from-diamondSolid', value: 'diamondSolid' },\n  { icon: '#l-from-circleSolid', value: 'circleSolid' },\n  { icon: '#l-from-line', value: 'line' },\n];\nconst toArrow = ref('');\nconst toArrows: Arrow[] = [\n  { icon: '#l-line', value: '' },\n  { icon: '#l-to-triangle', value: 'triangle' },\n  { icon: '#l-to-diamond', value: 'diamond' },\n  { icon: '#l-to-circle', value: 'circle' },\n  { icon: '#l-to-lineDown', value: 'lineDown' },\n  { icon: '#l-to-lineUp', value: 'lineUp' },\n  { icon: '#l-to-triangleSolid', value: 'triangleSolid' },\n  { icon: '#l-to-diamondSolid', value: 'diamondSolid' },\n  { icon: '#l-to-circleSolid', value: 'circleSolid' },\n  { icon: '#l-to-line', value: 'line' },\n];\n\nconst changeFromArrow = (value: string) => {\n  fromArrow.value = value;\n  // 画布默认值\n  meta2d.store.data.fromArrow = value;\n  // 活动层的箭头都变化\n  if (meta2d.store.active) {\n    meta2d.store.active.forEach((pen: Pen) => {\n      if (pen.type === PenType.Line) {\n        pen.fromArrow = value;\n        meta2d.setValue(\n          {\n            id: pen.id,\n            fromArrow: pen.fromArrow,\n          },\n          {\n            render: false,\n          }\n        );\n      }\n    });\n    meta2d.render();\n  }\n};\n\nconst changeToArrow = (value: string) => {\n  toArrow.value = value;\n  // 画布默认值\n  meta2d.store.data.toArrow = value;\n  // 活动层的箭头都变化\n  if (meta2d.store.active) {\n    meta2d.store.active.forEach((pen: Pen) => {\n      if (pen.type === PenType.Line) {\n        pen.toArrow = value;\n        meta2d.setValue(\n          {\n            id: pen.id,\n            toArrow: pen.toArrow,\n          },\n          {\n            render: false,\n          }\n        );\n      }\n    });\n    meta2d.render();\n  }\n};\n\nconst newFile = () => {\n  meta2d.open({ name: '新建项目', pens: [] } as any);\n};\n\nfunction readFile(file: Blob) {\n  return new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      resolve(reader.result as string);\n    };\n    reader.onerror = reject;\n    reader.readAsText(file);\n  });\n}\n\nconst openFile = () => {\n  // 1. 显示选择文件对话框\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.onchange = async (event) => {\n    const elem = event.target as HTMLInputElement;\n    if (elem.files && elem.files[0]) {\n      // 2. 读取文件字符串内容\n      const text = await readFile(elem.files[0]);\n      try {\n        // 3. 打开文件内容\n        meta2d.open(JSON.parse(text));\n\n        // 可选：缩放到窗口大小展示\n        meta2d.fitView();\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  };\n  input.click();\n};\n\nconst downloadJson = () => {\n  const data: any = meta2d.data();\n  FileSaver.saveAs(\n    new Blob([JSON.stringify(data)], {\n      type: 'text/plain;charset=utf-8',\n    }),\n    `${data.name || 'le5le.meta2d'}.json`\n  );\n};\n\nconst downloadPng = () => {\n  let name = (meta2d.store.data as any).name;\n  if (name) {\n    name += '.png';\n  }\n  meta2d.downloadPng(name);\n};\n\n// 判断该画笔 是否是组合为状态中 展示的画笔\nfunction isShowChild(pen: any, store: any) {\n  let selfPen = pen;\n  while (selfPen && selfPen.parentId) {\n    const oldPen = selfPen;\n    selfPen = store.pens[selfPen.parentId];\n    const showChildIndex = selfPen?.calculative?.showChild;\n    if (showChildIndex != undefined) {\n      const showChildId = selfPen.children[showChildIndex];\n      if (showChildId !== oldPen.id) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nconst downloadSvg = () => {\n  if (!C2S) {\n    MessagePlugin.error('请先加载乐吾乐官网下的canvas2svg.js');\n    return;\n  }\n\n  const rect: any = meta2d.getRect();\n  rect.x -= 10;\n  rect.y -= 10;\n  const ctx = new C2S(rect.width + 20, rect.height + 20);\n  ctx.textBaseline = 'middle';\n  for (const pen of meta2d.store.data.pens) {\n    if (pen.visible == false || !isShowChild(pen, meta2d.store)) {\n      continue;\n    }\n    meta2d.renderPenRaw(ctx, pen, rect);\n  }\n\n  let mySerializedSVG = ctx.getSerializedSvg();\n  if (meta2d.store.data.background) {\n    mySerializedSVG = mySerializedSVG.replace('{{bk}}', '');\n    mySerializedSVG = mySerializedSVG.replace(\n      '{{bkRect}}',\n      `<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"${meta2d.store.data.background}\"></rect>`\n    );\n  } else {\n    mySerializedSVG = mySerializedSVG.replace('{{bk}}', '');\n    mySerializedSVG = mySerializedSVG.replace('{{bkRect}}', '');\n  }\n\n  mySerializedSVG = mySerializedSVG.replace(/--le5le--/g, '&#x');\n\n  const urlObject: any = (window as any).URL || window;\n  const export_blob = new Blob([mySerializedSVG]);\n  const url = urlObject.createObjectURL(export_blob);\n\n  const a = document.createElement('a');\n  a.setAttribute(\n    'download',\n    `${(meta2d.store.data as any).name || 'le5le.meta2d'}.svg`\n  );\n  a.setAttribute('href', url);\n  const evt = document.createEvent('MouseEvents');\n  evt.initEvent('click', true, true);\n  a.dispatchEvent(evt);\n};\n\nconst onUndo = () => {\n  meta2d.undo();\n};\n\nconst onRedo = () => {\n  meta2d.redo();\n};\n\nconst onCut = () => {\n  meta2d.cut();\n};\n\nconst onCopy = () => {\n  meta2d.copy();\n};\n\nconst onPaste = () => {\n  meta2d.paste();\n};\n\nconst onAll = () => {\n  meta2d.activeAll();\n};\n\nconst onDelete = () => {\n  meta2d.delete();\n};\n\nconst onAddShape = (event: DragEvent | MouseEvent, name: string) => {\n  event.stopPropagation();\n  let data: any;\n  if (name === 'text') {\n    // 构建一个文本图元\n    data = {\n      text: 'text',\n      width: 100,\n      height: 20,\n      name: 'text',\n    };\n  } else if (name === 'line') {\n    // 构建一个直线图元\n    data = {\n      anchors: [\n        { id: '0', x: 1, y: 0 },\n        { id: '1', x: 0, y: 1 },\n      ],\n      width: 100,\n      height: 100,\n      name: 'line',\n      lineName: 'line',\n      type: 1,\n    };\n  }\n  if (!(event as DragEvent).dataTransfer) {\n    // 支持点击画布添加\n    meta2d.canvas.addCaches = deepClone([data]);\n  } else {\n    // 支持拖拽添加\n    (event as DragEvent).dataTransfer?.setData('Meta2d', JSON.stringify(data));\n  }\n};\n\nconst onScaleDefault = () => {\n  meta2d.scale(1);\n  meta2d.centerView();\n};\n\nconst onScaleWindow = () => {\n  meta2d.fitView();\n};\n\nconst onView = () => {\n  // 先停止动画，避免数据波动\n  meta2d.stopAnimate();\n  // 本地存储\n  const data: any = meta2d.data();\n  localStorage.setItem('meta2d', JSON.stringify(data));\n  // 跳转到预览页面\n  router.push({\n    path: '/preview',\n    query: {\n      r: Date.now() + '',\n      id: data._id,\n    },\n  });\n};\n</script>\n<style lang=\"postcss\" scoped>\n.app-header {\n  display: flex;\n  height: 40px;\n  padding: 0 12px;\n  position: relative;\n  border-bottom: 1px solid rgba(0, 176, 255, 0.2);\n  z-index: 2;\n  background-color: #001529;\n\n  .logo {\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n    font-weight: 500;\n    padding-left: 0;\n    color: #00B0FF;\n\n    img {\n      height: 20px;\n      margin-right: 6px;\n    }\n  }\n\n  a {\n    display: flex;\n    padding: 0 8px;\n    margin: 0 8px;\n    align-items: center;\n    color: #00B0FF;\n    text-decoration: none;\n    white-space: nowrap;\n    transition: all 0.3s ease;\n\n    &:hover {\n      color: #40C4FF;\n      text-shadow: 0 0 8px rgba(0, 176, 255, 0.5);\n    }\n\n    svg {\n      font-size: 15px;\n      margin: 2px 4px 0 0;\n    }\n\n    &.active {\n      background-color: rgba(0, 176, 255, 0.15);\n      color: #40C4FF;\n    }\n  }\n\n  svg {\n    height: 40px;\n    margin: 0 8px;\n    color: #00B0FF;\n    transition: all 0.3s ease;\n    \n    &:hover {\n      color: #40C4FF;\n      cursor: pointer;\n      filter: drop-shadow(0 0 4px rgba(0, 176, 255, 0.5));\n    }\n  }\n}\n</style>\n\n<style>\n.t-dropdown__item-text {\n  a {\n    color: #00B0FF;\n    text-decoration: none;\n    white-space: nowrap;\n    transition: all 0.3s ease;\n\n    &:hover {\n      color: #40C4FF;\n      text-shadow: 0 0 8px rgba(0, 176, 255, 0.5);\n    }\n  }\n}\n\n.header-dropdown {\n  background-color: #001529 !important;\n  border: 1px solid rgba(0, 176, 255, 0.2) !important;\n  box-shadow: 0 0 20px rgba(0, 176, 255, 0.1) !important;\n}\n\n.t-dropdown__item {\n  background-color: transparent !important;\n  transition: all 0.3s ease !important;\n\n  &:hover {\n    background-color: rgba(0, 176, 255, 0.1) !important;\n  }\n}\n\n.t-dropdown__item--divided::after {\n  border-color: rgba(0, 176, 255, 0.2) !important;\n}\n\n.t-tooltip {\n  background-color: #001529 !important;\n  border: 1px solid rgba(0, 176, 255, 0.2) !important;\n  color: #00B0FF !important;\n    }\n\n.flex-grow {\n  flex-grow: 1;\n}\n\n.flex {\n  display: flex;\n  align-items: center;\n}\n</style>\n","<template>\n  <div class=\"graphics\">\n    <t-collapse :defaultExpandAll=\"true\">\n      <t-collapse-panel\n        :header=\"item.name\"\n        v-for=\"item in graphicGroups\"\n        :key=\"item.name\"\n      >\n        <template v-for=\"elem in item.list\">\n          <div\n            class=\"graphic\"\n            :draggable=\"true\"\n            @dragstart=\"dragStart($event, elem)\"\n            @click.prevent=\"dragStart($event, elem)\"\n          >\n            <template v-if=\"elem.data.image\">\n              <img :src=\"elem.data.image\" :alt=\"elem.name\" class=\"l-icon\" />\n            </template>\n            <template v-else>\n              <div :class=\"[elem.icon, 'l-icon']\"></div>\n            </template>\n            <p :title=\"elem.name\">{{ elem.name }}</p>\n          </div>\n        </template>\n      </t-collapse-panel>\n    </t-collapse>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { TextAlign, TextBaseline } from '@meta2d/core';\n\ninterface PenData {\n  width: number;\n  height: number;\n  name: string;\n  text?: string;\n  image?: string;\n  textPosition?: string;\n  textColor?: string;\n  borderRadius?: number;\n  textTop?: number;\n  z?: number;\n  offsetX?: number;\n  background?: string;\n  textBaseline?: TextBaseline;\n  textWidth?: number;\n  textHeight?: number;\n  textAlign?: TextAlign;\n  textLeft?: number;\n  lineTop?: number;\n  lineLeft?: number;\n  fillStyle?: string;\n  strokeStyle?: string;\n  lineWidth?: number;\n  color?: string;\n  list?: Array<{\n    text: string;\n  }>;\n  props?: {\n    custom: Array<{\n      key: string;\n      label: string;\n      type: string;\n      min?: number;\n      placeholder?: string;\n    }>;\n  };\n}\n\ninterface GraphicItem {\n  name: string;\n  icon: string;\n  id?: string | number;\n  data: PenData;\n}\n\ninterface GraphicGroup {\n  name: string;\n  show: boolean;\n  list: GraphicItem[];\n}\n\nconst graphicGroups: GraphicGroup[] = [\n  {\n    name: '设备',\n    show: true,\n    list: [\n      {\n        name: '分集水器',\n        icon: 'l-device-separator',\n        id: 'device_1',\n        data: {\n          width: 100,\n          height: 40,\n          name: 'image',\n          text: '分集水器',\n          image: '/devices/separator.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '加药泵',\n        icon: 'l-device-pump',\n        id: 'device_2',\n        data: {\n          width: 40,\n          height: 80,\n          name: 'image',\n          text: '加药泵',\n          image: '/devices/pump.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '加药箱',\n        icon: 'l-device-tank',\n        id: 'device_3',\n        data: {\n          width: 60,\n          height: 100,\n          name: 'image',\n          text: '加药箱',\n          image: '/devices/tank.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '加药箱2',\n        icon: 'l-device-tank2',\n        id: 'device_4',\n        data: {\n          width: 60,\n          height: 100,\n          name: 'image',\n          text: '加药箱2',\n          image: '/devices/tank2.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '压力表',\n        icon: 'l-device-gauge',\n        id: 'device_5',\n        data: {\n          width: 60,\n          height: 60,\n          name: 'image',\n          text: '压力表',\n          image: '/devices/gauge.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '压滤机',\n        icon: 'l-device-filter',\n        id: 'device_6',\n        data: {\n          width: 120,\n          height: 40,\n          name: 'image',\n          text: '压滤机',\n          image: '/devices/filter.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '回流泵',\n        icon: 'l-device-pump2',\n        id: 'device_7',\n        data: {\n          width: 80,\n          height: 40,\n          name: 'image',\n          text: '回流泵',\n          image: '/devices/pump2.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '废水池',\n        icon: 'l-device-pool',\n        id: 'device_8',\n        data: {\n          width: 120,\n          height: 120,\n          name: 'image',\n          text: '废水池',\n          image: '/devices/pool.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '排水泵',\n        icon: 'l-device-drain',\n        id: 'device_9',\n        data: {\n          width: 80,\n          height: 40,\n          name: 'image',\n          text: '排水泵',\n          image: '/devices/drain.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '污泥收集',\n        icon: 'l-device-sludge',\n        id: 'device_10',\n        data: {\n          width: 120,\n          height: 120,\n          name: 'image',\n          text: '污泥收集',\n          image: '/devices/sludge.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '污泥泵',\n        icon: 'l-device-sludge-pump',\n        id: 'device_11',\n        data: {\n          width: 40,\n          height: 100,\n          name: 'image',\n          text: '污泥泵',\n          image: '/devices/sludge-pump.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '沉淀池',\n        icon: 'l-device-settling',\n        id: 'device_12',\n        data: {\n          width: 150,\n          height: 150,\n          name: 'image',\n          text: '沉淀池',\n          image: '/devices/settling.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n    ],\n  },\n  {\n    name: '基本形状',\n    show: true,\n    list: [\n      {\n        name: '正方形',\n        icon: 'l-rect',\n        id: 1,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'rectangle',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '矩形',\n        icon: 'l-rectangle',\n        id: 2,\n        data: {\n          width: 200,\n          height: 50,\n          name: 'rectangle',\n          borderRadius: 0.1,\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '圆',\n        icon: 'l-circle',\n        id: 3,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'circle',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '三角形',\n        icon: 'l-triangle',\n        id: 4,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'triangle',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '菱形',\n        icon: 'l-diamond',\n        id: 5,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'diamond',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '五边形',\n        icon: 'l-pentagon',\n        id: 6,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'pentagon',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '六边形',\n        icon: 'l-hexagon',\n        id: 7,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'hexagon',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '五角星',\n        icon: 'l-pentagram',\n        id: 8,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'pentagram',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '左箭头',\n        icon: 'l-arrow-left',\n        id: 9,\n        data: {\n          width: 120,\n          height: 60,\n          name: 'leftArrow',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '右箭头',\n        icon: 'l-arrow-right',\n        id: 10,\n        data: {\n          width: 120,\n          height: 60,\n          name: 'rightArrow',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '双向箭头',\n        icon: 'l-twoway-arrow',\n        id: 11,\n        data: {\n          width: 150,\n          height: 60,\n          name: 'twowayArrow',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '云',\n        icon: 'l-cloud',\n        id: 13,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'cloud',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '消息框',\n        icon: 'l-msg',\n        id: 14,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'message',\n          textTop: -0.1,\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '文件',\n        icon: 'l-file',\n        id: 15,\n        data: {\n          width: 80,\n          height: 100,\n          name: 'file',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '立方体',\n        icon: 'l-cube',\n        id: 18,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'cube',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '人',\n        icon: 'l-people',\n        id: 19,\n        data: {\n          width: 70,\n          height: 100,\n          name: 'people',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n    ],\n  },\n];\n\nconst dragStart = (e: any, elem: GraphicItem) => {\n  if (!elem) {\n    return;\n  }\n  e.stopPropagation();\n\n  // 拖拽事件\n  if (e instanceof DragEvent) {\n    // 设置拖拽数据\n    e.dataTransfer?.setData('Meta2d', JSON.stringify(elem.data));\n  } else {\n    // 支持单击添加图元。平板模式\n    meta2d.canvas.addCaches = [elem.data];\n  }\n};\n</script>\n<style lang=\"postcss\" scoped>\n.graphics {\n  height: 100%;\n  overflow-y: auto;\n  background-color: #001529;\n  border-right: 1px solid rgba(255, 255, 255, 0.1);\n\n  :deep(.t-collapse) {\n    border: none;\n    background-color: transparent;\n\n    .t-collapse-panel {\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n      background-color: transparent;\n\n      &__header {\n        height: 48px;\n        color: #fff;\n        font-size: 14px;\n        background-color: rgba(255, 255, 255, 0.03);\n        transition: all 0.3s ease;\n\n      &:hover {\n          background-color: rgba(255, 255, 255, 0.08);\n        }\n\n        .t-collapse-panel__header-right {\n          color: #fff;\n        }\n      }\n\n      &__content {\n        background-color: rgba(0, 24, 48, 0.8) !important;\n        padding: 16px;\n        display: grid;\n        grid-template-columns: repeat(3, 1fr);\n        gap: 12px;\n      }\n    }\n  }\n}\n\n.graphic {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  padding: 8px;\n  cursor: move;\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 4px;\n  background-color: rgba(255, 255, 255, 0.02);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.08);\n    box-shadow: 0 0 8px rgba(64, 196, 255, 0.2);\n    transform: translateY(-1px);\n  }\n\n  .l-icon {\n    width: 24px;\n    height: 24px;\n    color: rgb(0, 31, 151);\n    display: inline-block;\n  }\n\n  img.l-icon {\n    object-fit: contain;\n  }\n\n  div.l-icon {\n    background-color: currentColor;\n  }\n\n  p {\n    margin: 0;\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.9);\n    text-align: center;\n    width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n\n::-webkit-scrollbar-track {\n  background: #001529;\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n</style>\n","<template>\r\n  <div class=\"props-panel\">\r\n    <t-form label-align=\"left\">\r\n      <h5 class=\"mb-24\">图纸</h5>\r\n      <t-form-item label=\"图纸名称\" name=\"name\">\r\n        <t-input v-model=\"data.name\" @change=\"onChangeData\" />\r\n      </t-form-item>\r\n      <t-divider />\r\n      <t-form-item label=\"网格\" name=\"grid\">\r\n        <t-switch v-model=\"options.grid\" @change=\"onChangeOptions\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"网格大小\" name=\"gridSize\">\r\n        <t-input v-model.number=\"options.gridSize\" @change=\"onChangeOptions\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"网格角度\" name=\"gridRotate\">\r\n        <t-input\r\n          v-model.number=\"options.gridRotate\"\r\n          @change=\"onChangeOptions\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"网格颜色\" name=\"gridColor\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"options.gridColor\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"onChangeOptions\"\r\n        />\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"标尺\" name=\"rule\">\r\n        <t-switch v-model=\"options.rule\" @change=\"onChangeOptions\" />\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"背景颜色\" name=\"background\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"data.background\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"onChangeData\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"图元默认颜色\" name=\"color\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"data.color\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"onChangeData\"\r\n        />\r\n      </t-form-item>\r\n    </t-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { onMounted, reactive } from 'vue';\r\n\r\n// 图纸数据\r\nconst data = reactive<any>({\r\n  name: '',\r\n  background: undefined,\r\n  color: undefined,\r\n});\r\n\r\n// 画布选项\r\nconst options = reactive<any>({\r\n  grid: false,\r\n  gridSize: 10,\r\n  gridRotate: undefined,\r\n  gridColor: undefined,\r\n  rule: true,\r\n});\r\n\r\nonMounted(() => {\r\n  const d: any = meta2d.data();\r\n  data.name = d.name || '';\r\n  data.background = d.background;\r\n  data.color = d.color;\r\n\r\n  Object.assign(options, meta2d.getOptions());\r\n});\r\n\r\nconst onChangeData = () => {\r\n  Object.assign(meta2d.store.data, data);\r\n  meta2d.store.patchFlagsBackground = true;\r\n  meta2d.render();\r\n};\r\n\r\nconst onChangeOptions = () => {\r\n  meta2d.setOptions(options);\r\n  meta2d.store.patchFlagsTop = true;\r\n  meta2d.store.patchFlagsBackground = true;\r\n  meta2d.render();\r\n};\r\n</script>\r\n<style lang=\"postcss\" scoped>\r\n.props-panel {\r\n  :deep(.t-form) {\r\n    .t-form__item {\r\n      margin-bottom: 8px;\r\n    }\r\n    .t-form__label {\r\n      padding-right: 8px;\r\n    }\r\n\r\n    .t-divider {\r\n      margin: 12px 0;\r\n    }\r\n\r\n    .t-input--auto-width {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"props-panel\">\r\n    <t-form label-align=\"left\" v-if=\"pen\">\r\n      <h5 class=\"mb-24\">图元</h5>\r\n      <t-form-item label=\"文本\" name=\"text\">\r\n        <t-input v-model=\"pen.text\" @change=\"changeValue('text')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"颜色\" name=\"color\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"pen.color\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"changeValue('color')\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"背景\" name=\"background\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"pen.background\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"changeValue('background')\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"线条\" name=\"dash\">\r\n        <t-select v-model=\"pen.dash\" @change=\"changeValue('dash')\">\r\n          <t-option :key=\"0\" :value=\"0\" label=\"实线\"></t-option>\r\n          <t-option :key=\"1\" :value=\"1\" label=\"虚线\"></t-option>\r\n        </t-select>\r\n      </t-form-item>\r\n      <t-form-item label=\"圆角\" name=\"borderRadius\">\r\n        <t-input-number\r\n          :min=\"0\"\r\n          :max=\"1\"\r\n          :step=\"0.01\"\r\n          v-model=\"pen.borderRadius\"\r\n          @change=\"changeValue('borderRadius')\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"不透明度\" name=\"globalAlpha\">\r\n        <t-slider\r\n          v-model=\"pen.globalAlpha\"\r\n          :min=\"0\"\r\n          :max=\"1\"\r\n          :step=\"0.01\"\r\n          @change=\"changeValue('globalAlpha')\"\r\n        />\r\n        <span class=\"ml-16\" style=\"width: 50px; line-height: 30px\">\r\n          {{ pen.globalAlpha }}\r\n        </span>\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"X\" name=\"x\">\r\n        <t-input-number v-model=\"rect.x\" @change=\"changeRect('x')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"Y\" name=\"y\">\r\n        <t-input-number v-model=\"rect.y\" @change=\"changeRect('y')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"宽\" name=\"width\">\r\n        <t-input-number v-model=\"rect.width\" @change=\"changeRect('width')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"高\" name=\"height\">\r\n        <t-input-number v-model=\"rect.height\" @change=\"changeRect('height')\" />\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"文字水平对齐\" name=\"textAlign\">\r\n        <t-select v-model=\"pen.textAlign\" @change=\"changeValue('textAlign')\">\r\n          <t-option key=\"left\" value=\"left\" label=\"左对齐\"></t-option>\r\n          <t-option key=\"center\" value=\"center\" label=\"居中\"></t-option>\r\n          <t-option key=\"right\" value=\"right\" label=\"右对齐\"></t-option>\r\n        </t-select>\r\n      </t-form-item>\r\n      <t-form-item label=\"文字垂直对齐\" name=\"textBaseline\">\r\n        <t-select\r\n          v-model=\"pen.textBaseline\"\r\n          @change=\"changeValue('textBaseline')\"\r\n        >\r\n          <t-option key=\"top\" value=\"top\" label=\"顶部对齐\"></t-option>\r\n          <t-option key=\"middle\" value=\"middle\" label=\"居中\"></t-option>\r\n          <t-option key=\"bottom\" value=\"bottom\" label=\"底部对齐\"></t-option>\r\n        </t-select>\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-space>\r\n        <t-button @click=\"top\">置顶</t-button>\r\n        <t-button @click=\"bottom\">置底</t-button>\r\n        <t-button @click=\"up\">上一层</t-button>\r\n        <t-button @click=\"down\">下一层</t-button>\r\n      </t-space>\r\n    </t-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { onMounted, onUnmounted, ref, watch } from 'vue';\r\nimport { useSelection } from '@/services/selections';\r\n\r\nconst { selections } = useSelection();\r\n\r\nconst pen = ref<any>();\r\n// 位置数据。当前版本位置需要动态计算获取\r\nconst rect = ref<any>();\r\n\r\nonMounted(() => {\r\n  getPen();\r\n});\r\n\r\nconst getPen = () => {\r\n  pen.value = selections.pen;\r\n  if (pen.value.globalAlpha == undefined) {\r\n    pen.value.globalAlpha = 1;\r\n  }\r\n\r\n  rect.value = meta2d.getPenRect(pen.value);\r\n};\r\n\r\n// 监听选中不同图元\r\n// @ts-ignore\r\nconst watcher = watch(() => selections.pen.id, getPen);\r\n\r\nconst lineDashs = [undefined, [5, 5]];\r\n\r\nconst changeValue = (prop: string) => {\r\n  const v: any = { id: pen.value.id };\r\n  v[prop] = pen.value[prop];\r\n  if (prop === 'dash') {\r\n    v.lineDash = lineDashs[v[prop]];\r\n  }\r\n  meta2d.setValue(v, { render: true });\r\n};\r\n\r\nconst changeRect = (prop: string) => {\r\n  const v: any = { id: pen.value.id };\r\n  v[prop] = rect.value[prop];\r\n  meta2d.setValue(v, { render: true });\r\n};\r\n\r\nconst top = () => {\r\n  meta2d.top();\r\n  meta2d.render();\r\n};\r\nconst bottom = () => {\r\n  meta2d.bottom();\r\n  meta2d.render();\r\n};\r\nconst up = () => {\r\n  meta2d.up();\r\n  meta2d.render();\r\n};\r\nconst down = () => {\r\n  meta2d.down();\r\n  meta2d.render();\r\n};\r\n\r\nonUnmounted(() => {\r\n  watcher();\r\n});\r\n</script>\r\n<style lang=\"postcss\" scoped>\r\n.props-panel {\r\n  :deep(.t-form) {\r\n    .t-form__item {\r\n      margin-bottom: 8px;\r\n    }\r\n    .t-form__label {\r\n      padding-right: 8px;\r\n    }\r\n\r\n    .t-divider {\r\n      margin: 12px 0;\r\n    }\r\n\r\n    .t-input--auto-width {\r\n      width: 100%;\r\n    }\r\n\r\n    .t-space {\r\n      gap: 4px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"app-props\">\r\n    <FileProps v-if=\"selections.mode === SelectionMode.File\" />\r\n    <PenProps v-else-if=\"selections.mode === SelectionMode.Pen\" />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport FileProps from './FileProps.vue';\r\nimport PenProps from './PenProps.vue';\r\n\r\nimport { useSelection, SelectionMode } from '@/services/selections';\r\n\r\nconst { selections } = useSelection();\r\n</script>\r\n<style lang=\"postcss\" scoped>\r\n.app-props {\r\n  padding: 16px;\r\n  background-color: #001529;\r\n  border-left: 1px solid rgba(255, 255, 255, 0.1);\r\n  height: 100%;\r\n  overflow-y: auto;\r\n\r\n  :deep(.t-form__label) {\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n  }\r\n\r\n  :deep(.t-input),\r\n  :deep(.t-textarea),\r\n  :deep(.t-select) {\r\n    background-color: rgba(0, 24, 48, 0.8) !important;\r\n    border-color: rgba(255, 255, 255, 0.15) !important;\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n\r\n    &::placeholder {\r\n      color: rgba(255, 255, 255, 0.4) !important;\r\n    }\r\n\r\n    &:hover,\r\n    &:focus {\r\n      border-color: rgba(64, 196, 255, 0.5) !important;\r\n      box-shadow: 0 0 8px rgba(64, 196, 255, 0.2) !important;\r\n    }\r\n  }\r\n\r\n  :deep(.t-input__inner) {\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n  }\r\n\r\n  :deep(.t-select-option) {\r\n    background-color: rgba(0, 24, 48, 0.95) !important;\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n\r\n    &:hover,\r\n    &.t-select-option--selected {\r\n      background-color: rgba(255, 255, 255, 0.1) !important;\r\n    }\r\n  }\r\n\r\n  :deep(.t-select__dropdown) {\r\n    background-color: #001529 !important;\r\n    border: 1px solid rgba(255, 255, 255, 0.15) !important;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;\r\n  }\r\n}\r\n\r\n::-webkit-scrollbar {\r\n  width: 4px;\r\n  height: 4px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n  background: #001529;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n}\r\n</style>\r\n","<template>\n  <div class=\"app-page\">\n    <Header />\n\n    <div class=\"designer\">\n      <Graphics />\n      <View />\n      <Props />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { onMounted } from 'vue';\n\nimport Header from '../components/Header.vue';\nimport Graphics from '../components/Graphics.vue';\nimport View from '../components/View.vue';\nimport Props from '../components/Props.vue';\n\nlet timer: any;\nfunction save() {\n  if (timer) {\n    clearTimeout(timer);\n  }\n  timer = setTimeout(() => {\n    const data: any = meta2d.data();\n    localStorage.setItem('meta2d', JSON.stringify(data));\n    timer = undefined;\n  }, 1000);\n}\n\nonMounted(() => {\n  meta2d.on('scale', save);\n  meta2d.on('add', save);\n  meta2d.on('opened', save);\n  meta2d.on('undo', save);\n  meta2d.on('redo', save);\n  meta2d.on('add', save);\n  meta2d.on('delete', save);\n  meta2d.on('rotatePens', save);\n  meta2d.on('translatePens', save);\n});\n</script>\n\n<style lang=\"postcss\" scoped>\n.app-page {\n  height: 100vh;\n  overflow: hidden;\n\n  .designer {\n    display: grid;\n    grid-template-columns: 300px 1fr 301px;\n    height: calc(100vh - 80px);\n  }\n}\n</style>\n"],"names":["a","b","this","c","d","g","e","f","global","h","i","j","k","l","m","module","router","useRouter","isDrawLine","ref","scale","onMounted","timer","scaleSubscriber","val","drawLine","lineTypes","reactive","currentLineType","changeLineType","value","_a","pen","fromArrow","fromArrows","toArrow","toArrows","changeFromArrow","PenType","changeToArrow","newFile","readFile","file","resolve","reject","reader","openFile","input","event","elem","text","downloadJson","data","FileSaver","downloadPng","name","isShowChild","store","selfPen","oldPen","showChildIndex","downloadSvg","MessagePlugin","rect","ctx","mySerializedSVG","urlObject","export_blob","url","evt","onUndo","onRedo","onCut","onCopy","onPaste","onAll","onDelete","onAddShape","deepClone","onScaleDefault","onScaleWindow","onView","graphicGroups","dragStart","options","onChangeData","onChangeOptions","selections","useSelection","getPen","watcher","watch","lineDashs","changeValue","prop","v","changeRect","top","bottom","up","down","onUnmounted","save"],"mappings":"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","x_google_ignoreList":[0]}