{"version":3,"file":"color-picker.js","sources":["../../../components/color-picker/color-picker.tsx"],"sourcesContent":["import { defineComponent, ref, toRefs } from 'vue';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeDefault } from '../hooks/tnode';\nimport props from './props';\nimport { Popup as TPopup } from '../popup';\nimport ColorPanel from './components/panel';\nimport DefaultTrigger from './components/trigger';\nimport { TdColorContext } from './types';\nimport { useBaseClassName } from './hooks';\n\nexport default defineComponent({\n  name: 'TColorPicker',\n  props,\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const renderTNodeJSXDefault = useTNodeDefault();\n    const visible = ref(false);\n    const setVisible = (value: boolean) => (visible.value = value);\n\n    const { value: inputValue, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(inputValue, modelValue, props.defaultValue, props.onChange);\n\n    const refTrigger = ref<HTMLElement>();\n\n    const handleClear = (context: { e: MouseEvent }) => props.onClear?.(context);\n\n    const renderPopupContent = () => {\n      if (props.disabled) {\n        return null;\n      }\n      const newProps = { ...props };\n      delete newProps.onChange;\n      return (\n        <ColorPanel\n          {...newProps}\n          disabled={props.disabled}\n          value={innerValue.value}\n          togglePopup={setVisible}\n          onChange={(value: string, context: TdColorContext) => setInnerValue(value, context)}\n        />\n      );\n    };\n\n    return () => {\n      const popProps = {\n        placement: 'bottom-left',\n        ...((props.popupProps as any) || {}),\n        trigger: 'click',\n        attach: 'body',\n        overlayClassName: [baseClassName.value],\n        visible: visible.value,\n        overlayInnerStyle: {\n          padding: 0,\n        },\n        onVisibleChange: (\n          visible: boolean,\n          context: {\n            trigger: string;\n          },\n        ) => {\n          if (context.trigger === 'document') {\n            setVisible(false);\n          }\n        },\n      };\n      return (\n        <TPopup {...popProps} content={renderPopupContent}>\n          <div class={`${baseClassName.value}__trigger`} onClick={() => setVisible(!visible.value)} ref={refTrigger}>\n            {renderTNodeJSXDefault(\n              'default',\n              <DefaultTrigger\n                borderless={props.borderless}\n                color={innerValue.value}\n                disabled={props.disabled}\n                clearable={props.clearable}\n                input-props={props.inputProps}\n                onTriggerChange={setInnerValue}\n                onTriggerClear={handleClear}\n                size={props.size}\n              />,\n            )}\n          </div>\n        </TPopup>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","baseClassName","useBaseClassName","renderTNodeJSXDefault","useTNodeDefault","visible","ref","setVisible","value","_toRefs","toRefs","inputValue","modelValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","innerValue","setInnerValue","refTrigger","handleClear","context","onClear","renderPopupContent","disabled","newProps","_objectSpread","_createVNode","ColorPanel","_mergeProps","popProps","placement","popupProps","trigger","attach","overlayClassName","overlayInnerStyle","padding","onVisibleChange","TPopup","_default","concat","onClick","DefaultTrigger","borderless","clearable","inputProps","size"],"mappings":"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"}