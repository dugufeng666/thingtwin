/**
 * tdesign v1.13.0
 * (c) 2025 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _typeof = require('@babel/runtime/helpers/typeof');
var Vue = require('vue');
var hooks_useConfig = require('../hooks/useConfig.js');
var typography_textProps = require('./text-props.js');
var typography_utils_copyToClipboard_index = require('./utils/copy-to-clipboard/index.js');
var tdesignIconsVueNext = require('tdesign-icons-vue-next');
var typography_ellipsis = require('./ellipsis.js');
var tooltip_index = require('../tooltip/index.js');
var button_index = require('../button/index.js');
var configProvider_hooks_useConfig = require('../config-provider/hooks/useConfig.js');
var hooks_tnode = require('../_chunks/dep-8fa35315.js');
require('@babel/runtime/helpers/defineProperty');
require('./paragraph-props.js');
require('../tooltip/tooltip.js');
require('@babel/runtime/helpers/slicedToArray');
require('../tooltip/props.js');
require('../popup/props.js');
require('../popup/index.js');
require('../popup/popup.js');
require('@popperjs/core');
require('@babel/runtime/helpers/toConsumableArray');
require('../hooks/useKeepAnimation.js');
require('../_chunks/dep-47100b3a.js');
require('../_chunks/dep-687d9447.js');
require('../_chunks/dep-84fc4531.js');
require('dayjs');
require('../_chunks/dep-22d9d967.js');
require('../_chunks/dep-98fbf983.js');
require('../_chunks/dep-5590274c.js');
require('../_chunks/dep-104f7ee1.js');
require('../_chunks/dep-c94b540e.js');
require('../_chunks/dep-39c9581c.js');
require('../_chunks/dep-f022423f.js');
require('../_chunks/dep-a929bdb8.js');
require('../_chunks/dep-00397a41.js');
require('../_chunks/dep-3b62827f.js');
require('../_chunks/dep-d7a38fb3.js');
require('../_chunks/dep-92c5e4a5.js');
require('../_chunks/dep-78a63892.js');
require('../_chunks/dep-5d64466b.js');
require('../_chunks/dep-689071d2.js');
require('../_chunks/dep-edc40e94.js');
require('../_chunks/dep-2ce2286c.js');
require('../_chunks/dep-bb55dbeb.js');
require('../_chunks/dep-e5e0508f.js');
require('../_chunks/dep-8a241271.js');
require('../_chunks/dep-c7e11941.js');
require('../_chunks/dep-00dea1d2.js');
require('../hooks/useVModel.js');
require('../_chunks/dep-25e6caa1.js');
require('../_chunks/dep-8675a24d.js');
require('../_chunks/dep-7fc1ffe2.js');
require('../_chunks/dep-b1f64980.js');
require('../utils/dom.js');
require('../_chunks/dep-96341f20.js');
require('../popup/container.js');
require('../hooks/useResizeObserver.js');
require('../_chunks/dep-55d4f411.js');
require('../_chunks/dep-fb7bcbec.js');
require('../utils/withInstall.js');
require('../utils/render-tnode.js');
require('../_chunks/dep-9f078572.js');
require('../_chunks/dep-29224a9c.js');
require('../_chunks/dep-5ae95903.js');
require('../_chunks/dep-53ee0c65.js');
require('../_chunks/dep-565984b5.js');
require('../_chunks/dep-e7786719.js');
require('../_chunks/dep-7279283f.js');
require('../_chunks/dep-08fa391e.js');
require('../_chunks/dep-2963fcd8.js');
require('../tooltip/utils/index.js');
require('../_chunks/dep-9ca23be8.js');
require('../_chunks/dep-69e83dde.js');
require('../_chunks/dep-b658bf06.js');
require('../_chunks/dep-b84a0534.js');
require('../button/button.js');
require('../loading/index.js');
require('../_chunks/dep-6f7850dd.js');
require('../loading/plugin.js');
require('../loading/loading.js');
require('../loading/icon/gradient.js');
require('../_chunks/dep-ec4a2dad.js');
require('@babel/runtime/helpers/objectWithoutProperties');
require('../_chunks/dep-ceab8f85.js');
require('../_chunks/dep-a8fcbdcc.js');
require('../_chunks/dep-ec389751.js');
require('../hooks/useTeleport.js');
require('../loading/props.js');
require('../_chunks/dep-01fce6ff.js');
require('../_chunks/dep-2766940c.js');
require('../_chunks/dep-c6b053f2.js');
require('../_chunks/dep-3d3d9813.js');
require('../_chunks/dep-290797fe.js');
require('../_chunks/dep-f92d0863.js');
require('../button/props.js');
require('../hooks/useRipple.js');
require('../hooks/useDisabled.js');
require('../_chunks/dep-b12afab7.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var _typeof__default = /*#__PURE__*/_interopDefaultLegacy(_typeof);

function _isSlot(s) {
  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !Vue.isVNode(s);
}
var _Text = Vue.defineComponent({
  name: "TTypographyText",
  props: typography_textProps["default"],
  setup: function setup(props2, _ref) {
    var slots = _ref.slots;
    var COMPONENT_NAME = hooks_useConfig.usePrefixClass("typography");
    var _useConfig = configProvider_hooks_useConfig.useConfig("typography"),
      globalConfig = _useConfig.globalConfig;
    var isCopied = Vue.ref(false);
    var renderContent = hooks_tnode.useContent();
    var wrapperDecorations = function wrapperDecorations(_ref2, content2) {
      var code = _ref2.code,
        underline = _ref2.underline,
        del = _ref2["delete"],
        strong = _ref2.strong,
        keyboard = _ref2.keyboard,
        mark = _ref2.mark,
        italic = _ref2.italic;
      var currentContent = content2;
      function wrap(needed, Tag) {
        var styles = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
        if (!needed) return;
        var _currentContent = function () {
          return currentContent;
        }();
        currentContent = Vue.createVNode(Tag, {
          "style": styles
        }, _isSlot(currentContent) ? currentContent : {
          "default": function _default() {
            return [_currentContent];
          }
        });
      }
      wrap(strong, "strong");
      wrap(underline, "u");
      wrap(del, "del");
      wrap(code, "code");
      wrap(mark !== false, "mark", mark ? {
        color: mark
      } : {});
      wrap(keyboard, "kbd");
      wrap(italic, "i");
      return currentContent;
    };
    var classList = Vue.computed(function () {
      var theme = props2.theme,
        disabled = props2.disabled;
      var prefix = COMPONENT_NAME.value;
      var list = [prefix];
      if (disabled) {
        list.push("".concat(prefix, "--disabled"));
      } else if (theme && ["primary", "secondary", "success", "warning", "error"].includes(theme)) {
        list.push("".concat(prefix, "--").concat(theme));
      }
      return list;
    });
    var tooltipText = Vue.computed(function () {
      var _copyable$tooltipProp;
      var copyable = props2.copyable;
      if (isCopied.value) return globalConfig.value.copiedText;else if (_typeof__default["default"](copyable) === "object") return (_copyable$tooltipProp = copyable.tooltipProps) === null || _copyable$tooltipProp === void 0 ? void 0 : _copyable$tooltipProp.content;
      return null;
    });
    var content = Vue.computed(function () {
      return props2.content || (slots === null || slots === void 0 ? void 0 : slots["default"]());
    });
    var renderCopy = function renderCopy() {
      var copyable = props2.copyable;
      if (!copyable) return;
      var icon = isCopied.value ? function () {
        return Vue.createVNode(tdesignIconsVueNext.CheckIcon, null, null);
      } : function () {
        return Vue.createVNode(tdesignIconsVueNext.CopyIcon, null, null);
      };
      var tooltipConf = {
        theme: "default"
      };
      var onCopy = function onCopy() {};
      if (_typeof__default["default"](copyable) === "object") {
        if (copyable.suffix && !isCopied.value) {
          icon = copyable.suffix;
        }
        if (copyable.tooltipProps) {
          tooltipConf = copyable.tooltipProps;
        }
        if (typeof copyable.onCopy === "function") {
          onCopy = copyable.onCopy;
        }
      }
      return Vue.createVNode(tooltip_index.Tooltip, Vue.mergeProps(tooltipConf, {
        "content": tooltipText.value
      }), {
        "default": function _default() {
          return [Vue.createVNode(button_index.Button, {
            "icon": icon,
            "shape": "square",
            "theme": "primary",
            "variant": "text",
            "onClick": function onClick(e) {
              return onCopyClick(e, onCopy);
            }
          }, null)];
        }
      });
    };
    var getChildrenText = function getChildrenText() {
      if (typeof content.value === "string") {
        return content.value;
      } else if (Array.isArray(content.value)) {
        return content.value.map(function (v) {
          return v.children;
        }).join("");
      }
    };
    var onCopyClick = function onCopyClick(e, cb) {
      e.preventDefault();
      e.stopPropagation();
      isCopied.value = true;
      setTimeout(function () {
        isCopied.value = false;
      }, 1500);
      typography_utils_copyToClipboard_index["default"](getChildrenText());
      cb === null || cb === void 0 || cb();
    };
    return function () {
      var content2 = renderContent("default", "content");
      return props2.ellipsis ? Vue.createVNode(typography_ellipsis["default"], Vue.mergeProps(props2, {
        "class": classList.value
      }), {
        "default": function _default() {
          return [wrapperDecorations(props2, content2), props2.copyable ? renderCopy() : null];
        }
      }) : Vue.createVNode("span", {
        "class": classList.value
      }, [wrapperDecorations(props2, content2), props2.copyable ? renderCopy() : null]);
    };
  }
});

exports["default"] = _Text;
//# sourceMappingURL=text.js.map
