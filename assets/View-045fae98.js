import{a as kt,s as nt,d as E,b as ot,f as Nt,e as vt,h as Vt,r as K,i as ct,j as Xt,p as L,k as It,l as gt,m as G,M as jt,n as At,o as at}from"./meta2d-de3edc3f.js";import{r as $t,_ as Ut}from"./index-cef69f07.js";import{s as Gt,f as qt,j as Jt,u as Zt,o as Qt,U as Kt}from"./vue-vendor-eb926c9c.js";function _t(t,e){const a=e||new Path2D,{x:o,y:l,width:c,ey:i}=t.calculative.worldRect,r=c/4;if(a.moveTo(o+r,l),a.lineTo(o,l),a.lineTo(o,i),a.lineTo(o+r,i),a instanceof Path2D)return a}function pt(t){const e=[{x:.25,y:0},{x:.25,y:1},{x:0,y:.5}];t.anchors=e.map(({x:a,y:o},l)=>({id:l+"",x:a,y:o,penId:t.id}))}function te(t,e){const a=e||new Path2D,{x:o,y:l,width:c,ex:i,ey:r}=t.calculative.worldRect,s=t.offsetX;let f=c/7;if(s>1?f=s:s>0&&(f=c*s),a.moveTo(o+f,l),a.lineTo(i,l),a.lineTo(o+c-f,r),a.lineTo(o,r),a.closePath(),a instanceof Path2D)return a}function ee(t){const e=[{x:.5,y:0},{x:.9285714285714286,y:.5},{x:.5,y:1},{x:.07142857142857142,y:.5}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function ae(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i,ex:r,ey:s}=t.calculative.worldRect,f=c/8;if(a.moveTo(o+f,l),a.lineTo(r-f,l),a.bezierCurveTo(r+f/3,l,r+f/3,s,r-f,s),a.lineTo(o+f,s),a.lineTo(o,l+i/2),a.closePath(),a instanceof Path2D)return a}function le(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i,ex:r,center:s}=t.calculative.worldRect,f=s.x,h=l+i*6/7,n=i/6;if(a.moveTo(o,l),a.lineTo(r,l),a.lineTo(r,h),a.bezierCurveTo(r-20,h-n,f+c/5,h-n,f,h),a.bezierCurveTo(f-c/5,h+n,o,h+n,o,h),a.closePath(),a instanceof Path2D)return a}function oe(t){const e=[{x:.5,y:0},{x:1,y:.5},{x:.5,y:.8571428571428571},{x:0,y:.5}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function ie(t,e){const a=e||new Path2D,{x:o,y:l,width:c,ex:i,ey:r}=t.calculative.worldRect,s=c/10;if(a.moveTo(o+s*2,l),a.bezierCurveTo(o-s*2/3,l,o-s*2/3,r,o+s*2,r),a.lineTo(i,r),a.bezierCurveTo(i-s,r,i-s,l,i,l),a.closePath(),a instanceof Path2D)return a}function re(t,e){const a=e||new Path2D,{x:o,y:l,width:c,ex:i,ey:r}=t.calculative.worldRect;a.moveTo(o,l),a.lineTo(i,l),a.lineTo(i,r),a.lineTo(o,r),a.closePath();const s=c/7;if(a.moveTo(o,l+s),a.lineTo(i,l+s),a.moveTo(o+s,l),a.lineTo(o+s,r),a instanceof Path2D)return a}function ce(t,e){const a=e||new Path2D,{x:o,y:l,height:c,ex:i,ey:r}=t.calculative.worldRect,s=c/4;if(a.moveTo(o,l+s),a.lineTo(i,l),a.lineTo(i,r),a.lineTo(o,r),a.closePath(),a instanceof Path2D)return a}function se(t){const e=[{x:.5,y:.125},{x:1,y:.5},{x:.5,y:1},{x:0,y:.5}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function fe(t,e){const a=e||new Path2D,{x:o,y:l,ex:c,ey:i}=t.calculative.worldRect;if(a.moveTo(o,l),a.lineTo(c,l),a.moveTo(o,i),a.lineTo(c,i),a instanceof Path2D)return a}function he(t){const e=[{x:.5,y:0},{x:.5,y:1}];t.anchors=e.map(({x:a,y:o},l)=>({id:l+"",x:a,y:o,penId:t.id}))}function ne(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i,ex:r,ey:s}=t.calculative.worldRect;if(a.ellipse(o+c/2,l+i/2,c/2,i/2,0,0,Math.PI*2),a.moveTo(o+c/2,s),a.lineTo(r,s),a.closePath(),a instanceof Path2D)return a}function ue(t,e){const a=e||new Path2D,{x:o,y:l,width:c,ex:i,ey:r}=t.calculative.worldRect,s=c/7;if(a.moveTo(o,l),a.lineTo(i,l),a.lineTo(i,r),a.lineTo(o,r),a.closePath(),a.moveTo(o+s,l),a.lineTo(o+s,r),a.moveTo(i-s,l),a.lineTo(i-s,r),a instanceof Path2D)return a}function de(t,e){const a=e||new Path2D,{x:o,y:l,height:c,ex:i,ey:r}=t.calculative.worldRect,s=c/7;if(a.moveTo(o,l+s),a.bezierCurveTo(o,l-s/2|0,i,l-s/2|0,i,l+s),a.lineTo(i,r-s),a.bezierCurveTo(i,r+s/2|0,o,r+s/2|0,o,r-s),a.closePath(),a.moveTo(o,r-s),a.bezierCurveTo(o,r-s*2|0,i,r-s*2|0,i,r-s),a instanceof Path2D)return a}function ve(){return{flowComment:_t,flowData:te,flowDb:de,flowDisplay:ae,flowDocument:le,flowExternStorage:ie,flowInternalStorage:re,flowManually:ce,flowParallel:fe,flowQueue:ne,flowSubprocess:ue}}function ge(){return{flowDocument:oe,flowManually:se,flowParallel:he,flowComment:pt,flowData:ee}}function ye(t,e){const{x:a,y:o,width:l,height:c}=e.calculative.worldRect;t.beginPath(),t.ellipse(a+l/2,o+c/2,l/2,c/2,0,0,Math.PI*2),t.stroke(),t.beginPath(),t.fillStyle=t.strokeStyle,t.ellipse(a+l/2,o+c/2,l/4,c/4,0,0,Math.PI*2),t.fill()}function me(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i,ey:r}=t.calculative.worldRect,s=t.calculative.lineLeft||.08;let f=t.calculative.borderRadius||0,h=f;f<1&&(f=c*f,h=i*f);let n=f<h?f:h;if(c<2*n&&(n=c/2),i<2*n&&(n=i/2),a.moveTo(o+n,l),a.arcTo(o+c,l,o+c,l+i,n),a.arcTo(o+c,l+i,o,l+i,n),a.arcTo(o,l+i,o,l,n),a.arcTo(o,l,o+c,l,n),a.closePath(),a.moveTo(o+s*c,l),a.lineTo(o+s*c,r),a instanceof Path2D)return a}function we(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i,ex:r}=t.calculative.worldRect,s=t.calculative.lineTop||.08;let f=t.calculative.borderRadius||0,h=f;f<1&&(f=c*f,h=i*h);let n=f<h?f:h;if(c<2*n&&(n=c/2),i<2*n&&(n=i/2),a.moveTo(o+n,l),a.arcTo(o+c,l,o+c,l+i,n),a.arcTo(o+c,l+i,o,l+i,n),a.arcTo(o,l+i,o,l,n),a.arcTo(o,l,o+c,l,n),a.closePath(),a.moveTo(o,l+s*i),a.lineTo(r,l+s*i),a instanceof Path2D)return a}function be(){return{forkV:kt,forkH:kt,swimlaneH:me,swimlaneV:we}}function Te(){return{activityFinal:ye}}function Pe(t,e){t.onDestroy||(t.onDestroy=ke,t.onAdd=Re);const a=e||new Path2D,{x:o,y:l,width:c,height:i,ex:r}=t.calculative.worldRect;let s=t.calculative.borderRadius||0,f=s;s<1&&(s*=c,f*=i);let h=s<f?s:f;c<2*h&&(h=c/2),i<2*h&&(h=i/2),a.moveTo(o+h,l),a.arcTo(o+c,l,o+c,l+i,h),a.arcTo(o+c,l+i,o,l+i,h),a.arcTo(o,l+i,o,l,h),a.arcTo(o,l,o+c,l,h);const n=.2*i;a.moveTo(o,l+n),a.lineTo(r,l+n);const d=l+n+(i-n)/2;if(a.moveTo(o,d),a.lineTo(r,d),a.closePath(),a instanceof Path2D)return a}function Re(t){const{x:e,y:a,width:o,height:l}=t.calculative.worldRect,c=t.list,i={name:"text",x:e,y:a+.2*l,width:o,height:.4*l,textAlign:"left",textBaseline:"top",textLeft:10,textTop:10},r={name:"text",x:e,y:a+.6*l,width:o,height:.4*l,textAlign:"left",textBaseline:"top",textLeft:10,textTop:10};Object.assign(i,c[0]),Object.assign(r,c[1]),t.calculative.canvas.makePen(i),t.calculative.canvas.makePen(r),t.calculative.canvas.parent.pushChildren(t,[i]),t.calculative.canvas.parent.pushChildren(t,[r])}function ke(t){const e=t.calculative.canvas.store;t.children.forEach(a=>{const o=e.data.pens.findIndex(l=>l.id===a);o>-1&&(e.data.pens.splice(o,1),e.pens[a]=void 0)}),t.children=void 0}function Ae(t,e){t.onDestroy||(t.onDestroy=Se,t.onAdd=Ce);const a=e||new Path2D,{x:o,y:l,width:c,height:i,ex:r}=t.calculative.worldRect;let s=t.calculative.borderRadius||0,f=s;s<1&&(s=c*s,f=i*f);let h=s<f?s:f;c<2*h&&(h=c/2),i<2*h&&(h=i/2),a.moveTo(o+h,l),a.arcTo(o+c,l,o+c,l+i,h),a.lineTo(o+c,l+i-h),a.arcTo(o+c,l+i,o,l+i,h),a.arcTo(o,l+i,o,l,h),a.arcTo(o,l,o+c,l,h);const n=.2*i;if(a.moveTo(o,l+n),a.lineTo(r,l+n),a.closePath(),a instanceof Path2D)return a}function Ce(t){const{x:e,y:a,width:o,height:l}=t.calculative.worldRect,c=t.list;let i={name:"text",x:e,y:a+.2*l,width:o,height:.8*l,textAlign:"left",textBaseline:"top",textLeft:10,textTop:10};Object.assign(i,c[0]),t.calculative.canvas.makePen(i),t.calculative.canvas.parent.pushChildren(t,[i])}function Se(t){const e=t.calculative.canvas.store;t.children.forEach(a=>{const o=e.data.pens.findIndex(l=>l.id===a);o>-1&&(e.data.pens.splice(o,1),e.pens[a]=void 0)}),t.children=[]}function De(){return{interfaceClass:Pe,simpleClass:Ae}}function Me(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect;if(a.rect(o,l,c,i),a.closePath(),a instanceof Path2D)return a}function Ie(t,e){const a=e.headHeight??50,{x:o,y:l,width:c,height:i,ey:r}=e.calculative.worldRect;let s=e.calculative.borderRadius||0,f=s;e.calculative.borderRadius<1&&(s*=c,f*=i);let h=s<f?s:f;c<2*h&&(h=c/2),a<2*h&&(h=a/2),t.beginPath(),t.moveTo(o+h,l),t.arcTo(o+c,l,o+c,l+a,h),t.arcTo(o+c,l+a,o,l+a,h),t.arcTo(o,l+a,o,l,h),t.arcTo(o,l,o+c,l,h),t.closePath(),t.stroke(),t.save(),t.beginPath(),t.lineWidth=1,t.setLineDash([7,7]);const n=o+c/2;t.moveTo(n,l+a+1),t.lineTo(n,r),t.stroke(),t.restore()}function We(){return{sequenceFocus:Me}}function He(){return{lifeline:Ie}}var rt;(function(t){t[t.Add=0]="Add",t[t.Replace=1]="Replace",t[t.ReplaceAll=2]="ReplaceAll"})(rt||(rt={}));let yt=["fontSize","nameGap","margin","width","symbolSize","itemWidth","itemHeight","fontWeight","top","left","right","bottom","zoom","edgeSymbolSize","nodeWidth","nodeGap","distance","length","length2","offsetCenter","size","symbolOffset","padding","barWidth","symbolOffset","shadowOffsetY","shadowOffsetX"];function Be(t){var l,c;let e=globalThis.echarts;if(!t.echarts||!e)return;if(typeof t.echarts=="string")try{t.echarts=JSON.parse(t.echarts)}catch{}yt=((l=t.calculative.canvas.store.options.diagramOptions.chart)==null?void 0:l.keyWords)||yt,t.onDestroy||(t.onDestroy=Fe,t.onMove=st,t.onResize=Le,t.onRotate=st,t.onValue=Ye,t.onBeforeValue=xe,t.onBinds=ze,t.onMouseEnter=st,t.onRenderPenRaw=ut,t.onScale=Ee),t.calculative.singleton||(t.calculative.singleton={});const a=new Path2D,o=t.calculative.worldRect;if(!t.calculative.singleton.div){const i=document.createElement("div");i.style.position="absolute",i.style.outline="none",i.style.left="-9999px",i.style.top="-9999px",i.style.width=o.width+"px",i.style.height=o.height+"px",document.body.appendChild(i),(c=t.calculative.canvas.externalElements)==null||c.parentElement.appendChild(i),nt(t,i),t.calculative.singleton.div=i,t.calculative.singleton.echart=e.init(i,t.echarts.theme),Oe(t),t.calculative.singleton.echartsReady=!0,t.echarts.geoName&&!e.getMap(t.echarts.geoName)&&(t.echarts.geoJson?e.registerMap(t.echarts.geoName,t.echarts.geoJson):t.echarts.geoUrl&&(t.calculative.singleton.echartsReady=!1,fetch(t.echarts.geoUrl).then(r=>{r.text().then(s=>{if(typeof s=="string")try{s=JSON.parse(s)}catch{}if(s.constructor!==Object&&s.constructor!==Array){console.warn("Invalid data:",s);return}e.registerMap(t.echarts.geoName,s),t.calculative.singleton.echartsReady=!0,t.calculative.singleton.echart.setOption(ft(t.echarts.option,t.calculative.canvas.store.data.scale),!0),t.calculative.singleton.echart.resize(),setTimeout(()=>{ut(t)},300)})}))),t.calculative.singleton.echartsReady&&setTimeout(()=>{t.calculative.singleton.echart.setOption(ft(t.echarts.option,t.calculative.canvas.store.data.scale),!0),setTimeout(()=>ut(t),300)})}return a}function Oe(t){var o;const e=t.calculative.singleton.echart,a=["click","dblclick","mousedown","mousemove","mouseup","mouseover","mouseout","globalout","contextmenu"];a.forEach(l=>{e.off(l)}),(o=t.events)==null||o.forEach(l=>{l.actions&&l.actions.length&&a.includes(l.name)&&e.on(l.name,c=>{let i=!1;l.conditions&&l.conditions.length?l.conditionType==="and"?i=l.conditions.every(r=>t.calculative.canvas.parent.judgeCondition(t,r.key,r)):l.conditionType==="or"&&(i=l.conditions.some(r=>t.calculative.canvas.parent.judgeCondition(t,r.key,r))):i=!0,i&&l.actions.forEach(r=>{if(r.timeout){let s=setTimeout(()=>{t.calculative.canvas.parent.events[r.action]&&(t.calculative.canvas.parent.events[r.action](t,r,c),clearTimeout(s),s=null)},r.timeout)}else t.calculative.canvas.parent.events[r.action]&&t.calculative.canvas.parent.events[r.action](t,r,c)})})})}function Fe(t){if(t.calculative.singleton&&t.calculative.singleton.div){t.calculative.singleton.div.remove();let e=globalThis.echarts;e&&e.dispose(t.calculative.singleton.echart),delete t.calculative.singleton.div,delete t.calculative.singleton.echart}}function st(t){t.calculative.singleton.div&&nt(t,t.calculative.singleton.div)}function Le(t){var e;st(t),(e=t.calculative.singleton)!=null&&e.echart&&t.calculative.singleton.echart.resize()}function Ee(t){var a,o;if(!t.calculative.singleton.echart)return;let e=globalThis.echarts;if(nt(t,t.calculative.singleton.div),!(t.echarts.geoName&&!e.getMap(t.echarts.geoName))){if(!t.echarts.diabled){if((a=t.echarts.option)!=null&&a.dataZoom){const c=t.calculative.singleton.echart.getOption().dataZoom;(o=t.echarts.option.dataZoom)==null||o.forEach((i,r)=>{c[r]&&(i.start=c[r].start,i.end=c[r].end)})}t.calculative.singleton.echart.setOption(ft(t.echarts.option,t.calculative.canvas.store.data.scale),!0)}t.calculative.singleton.echart.resize()}}function Ye(t){var e,a;if(t.calculative.singleton.echart&&(nt(t,t.calculative.singleton.div),t.calculative.singleton.echartsReady))if(t.calculative.partialOption){const o=t.calculative.partialOption.echarts.option;(Array.isArray((e=t.echarts)==null?void 0:e.replaceMerge)?(a=t.echarts)==null?void 0:a.replaceMerge.some(c=>o[c]):!1)?t.calculative.singleton.echart.setOption(E(o),{replaceMerge:t.echarts.replaceMerge}):t.calculative.singleton.echart.setOption(E(o))}else t.calculative.singleton.echart.setOption(ft(t.echarts.option,t.calculative.canvas.store.data.scale),!0)}function xe(t,e){if(t.calculative.partialOption=null,e.echarts){let v=globalThis.echarts;return e.echarts.geoName&&!v.getMap(e.echarts.geoName)&&(e.echarts.geoJson?v.registerMap(e.echarts.geoName,e.echarts.geoJson):e.echarts.geoUrl&&(t.calculative.singleton.echartsReady=!1,fetch(e.echarts.geoUrl).then(g=>{g.text().then(y=>{if(typeof y=="string")try{y=JSON.parse(y)}catch{}if(y.constructor!==Object&&y.constructor!==Array){console.warn("Invalid data:",y);return}return v.registerMap(e.echarts.geoName,y),t.calculative.singleton.echartsReady=!0,t.onValue(t),!1})}))),e}if(t.realTimes&&t.realTimes.length){let v=Object.keys(e);const{xAxis:g,yAxis:y}=t.echarts.option,{max:C,replaceMode:w,timeFormat:S}=t.echarts;let D=[],m=!1;for(let b in e)if(b.includes("echarts.option")){m=!0;let R=ot(t,b);if(Array.isArray(R)&&w===rt.Add&&(R.push(e[b]),C&&R.splice(0,R.length-C),e[b]=R,!v.includes("echarts.option.xAxis.data"))){let k="echarts.option.xAxis.data";Array.isArray(g)&&g.length&&(k="echarts.option.xAxis.0.data");let A=ot(t,k),P=Nt(S||"`${hours}:${minutes}:${seconds}`");A.push(P),C&&A.splice(0,A.length-C),e[k]=A}if(b.includes(".data.")){let k=b.substring(0,b.indexOf(".data.")+5);D.includes(k)||D.push(k)}}if(m){const b=E(e);t.calculative.partialOption=Ne(b,t),D.forEach(R=>{let k=ot(t,R);vt(t.calculative.partialOption,R,k)})}return e}if(!e.dataX&&!e.dataY)return e;const a=t.echarts,{max:o,replaceMode:l}=a;let c=e.dataX,i=e.dataY,r=[];i&&r.push("echarts.option.series");const s=a.option.series,f=s.length,{xAxis:h,yAxis:n}=a.option;Array.isArray(h)&&h.length>1&&console.warn("echarts 只支持单 x 轴，多 x 轴将被忽略");const d=Array.isArray(h)?h[0]:h,u=Array.isArray(n)?n[0]:n;if(l)if(l===rt.Replace){if(!d&&!u)i&&(f===1?(!Array.isArray(i)&&(i=[i]),i.forEach((v,g)=>{const y=s[0].data.find(C=>C.name===v.name);y&&(y.value=v.value)})):s.forEach((v,g)=>{Array.isArray(i[g])||(i[g]=[i[g]]),i[g].forEach((y,C)=>{const w=v.data.find(S=>S.name===y.name);w&&(w.value=y.value)})}));else if((d.type==="category"||u.type==="category")&&c&&i){const v=d.type==="category"?d.data:u.data;!Array.isArray(c)&&(c=[c]),!Array.isArray(i)&&(i=[i]),d.type==="category"?r.push("echarts.option.xAxis"):r.push("echarts.option.yAxis"),f===1?i.forEach((g,y)=>{const C=v.indexOf(c[y]);s[0].data[C]=g}):s.forEach((g,y)=>{i[y].forEach((C,w)=>{const S=v.indexOf(c[w]);g.data[S]=C})})}}else l===rt.ReplaceAll&&(c&&(d.data=c,d.data.splice(0,d.data.length-o),r.push("echarts.option.xAxis")),i&&(f===1?(s[0].data=i,s[0].data.splice(0,s[0].data.length-o)):s.forEach((v,g)=>{v.data=i[g],v.data.splice(0,v.data.length-o)})));else{if(c){!Array.isArray(c)&&(c=[c]);const v=d.data;v.push(...c),v.splice(0,v.length-o),r.push("echarts.option.xAxis")}if(i)if(f===1){!Array.isArray(i)&&(i=[i]);const v=s[0].data;v.push(...i),v.splice(0,v.length-o)}else s.forEach((v,g)=>{Array.isArray(i[g])||(i[g]=[i[g]]);const y=v.data;y.push(...i[g]),y.splice(0,y.length-o)})}return t.calculative.partialOption={},r.forEach(v=>{let g=ot(t,v);vt(t.calculative.partialOption,v,g)}),delete e.dataX,delete e.dataY,Object.assign(e,{echarts:a})}function ze(t,e,a){if(a.key!=="dataY")return;const o=t.echarts,{xAxis:l,yAxis:c}=o.option;Array.isArray(l)&&l.length>1&&console.warn("echarts 只支持单 x 轴，多 x 轴将被忽略");const i=Array.isArray(l)?l[0]:l,r=Array.isArray(c)?c[0]:c,s=o.option.series;if(!i&&!r){const f=[];if(Array.isArray(s)&&s.length===1)return s[0].data.forEach(h=>{const{dataId:n}=a.dataIds.find(d=>d.name===h.name);if(n){const d=e.find(u=>u.dataId===n);d&&f.push({name:h.name,value:d.value})}}),{id:t.id,dataY:f}}else if(i.type==="category"||r.type==="category"){const f=[],h=[],n=i.type==="category"?i.data:r.data;return n==null||n.forEach(d=>{const{dataId:u}=a.dataIds.find(v=>v.name===d);if(u){const v=e.find(g=>g.dataId===u);v&&(h.push(d),f.push(v.value))}}),{id:t.id,dataY:f,dataX:h}}else if(i.type==="time"){const f=[],h=+new Date;let n=!1;if(s.forEach((d,u)=>{const v=[],{dataId:g}=a.dataIds.find(y=>y.name===d.name);if(g){const y=e.find(C=>C.dataId===g);y&&(v.push([h,y.value]),n=!0)}f[u]=v}),n)f.forEach((d,u)=>{if(!d||d.length===0){const v=s[u].data[s[u].data.length-1];f[u]=[[h,v[1]]]}});else return;return{id:t.id,dataY:f.length===1?f[0]:f}}}function ut(t){var a,o;const e=new Image;e.src=(o=(a=t.calculative.singleton)==null?void 0:a.echart)==null?void 0:o.getDataURL({pixelRatio:2}),t.calculative.img=e}function ft(t,e){const a=E(t);if(a.dataZoom){let o=["right","top","width","height","left","bottom"];for(let l=0;l<o.length;l++)a.dataZoom.forEach(c=>{isNaN(c[o[l]])||(c[o[l]]*=e)})}return Vt(a,yt,e),a}function Ne(t,e){const a={};return Object.keys(t).forEach(o=>{const l=o.split(".");let c=a;l.forEach((i,r)=>{const s=!isNaN(parseInt(i));if(r===6){let f=l.slice(0,7).join(".");vt(e,o,t[o]);let h=ot(e,f);c[l[r]]=h}else{if(r>6)return;if(r===l.length-1)s?(Array.isArray(c)||(c=[]),c[parseInt(i)]=t[o]):c[i]=t[o];else if(s){const f=parseInt(i);if(Array.isArray(c)||c[l[r-1]],c[f]||(c[f]={}),Array.isArray(c))for(let h=0;h<parseInt(i);h++)c[h]||(c[h]={});c=c[f]}else c[i]||(i==="series"?c[i]=[]:c[i]={}),c=c[i]}})}),a}function Ve(t){t&&(globalThis.echarts=t),K({echarts:Be})}var ht;(function(t){t[t.Add=0]="Add",t[t.Replace=1]="Replace",t[t.ReplaceAll=2]="ReplaceAll"})(ht||(ht={}));function Wt(t,e){const a=e.calculative.worldRect.height*14/16,l=(t.match(/[\u4e00-\u9fa5]/g)||"").length;return(t.length-l)*a*.6+l*a}function Ht(t){if(t.direction=="horizontal"){const e=[];let a=0;const o=t.height;t.checkboxHeight=o,t.options.forEach((c,i)=>{e.push(i*(40+o)+a),a+=Wt(c.text,t)}),t.optionPos=e;const l=e.length*(40+o)+a;t.checkboxWidth=l,t.width=l,t.calculative.width=l,t.calculative.worldRect={x:t.x,y:t.y,height:t.height,width:t.width,center:{x:t.x+t.width/2,y:t.y+t.height/2}},ct(t.calculative.worldRect)}else if(t.direction=="vertical"){t.optionInterval==null&&(t.optionInterval=20),t.optionHeight||(t.optionHeight=20);const e=[];t.options.forEach((o,l)=>{e.push(l*(t.optionInterval+t.optionHeight))}),t.optionPos=e;const a=e[e.length-1]+t.optionHeight;t.checkboxHeight=a,t.width||(t.height=a,t.calculative.height=a,t.calculative.worldRect={x:t.x,y:t.y,height:t.height,width:t.width,center:{x:t.x+t.width/2,y:t.y+t.height/2}},ct(t.calculative.worldRect))}}function Ct(t,e){e.onAdd||(e.onAdd=Bt,(!e.rowPos||!e.colPos||!e.calculative.maxOffsetY)&&e.onAdd(e),e.onMouseMove=Je,e.onMouseLeave=Ze,e.onMouseDown=Qe,e.onShowInput=Ge,e.onInput=qe,e.onValue=pe,e.onBeforeValue=ta,e.onMouseEnter=ia,e.onWheel=ea,e.onDestroy=la),e.data.length!==e.rowPos.length&&(e.initWorldRect=null,e.calculative.isUpdateData=!0,e.onValue(e)),e.data[0].length!==e.colPos.length&&(e.initWorldRect=null,e.calculative.isUpdateData=!0,e.onValue(e));const a=e.calculative.canvas.store;if(e.calculative.canvas.store.data,e.calculative.canvas.store.options,e.color=e.color||a.styles.color,e.textColor=e.textColor||e.color||a.styles.textColor,e.activeColor=e.activeColor||a.styles.activeColor,e.hoverColor=e.hoverColor||a.styles.hoverColor,e.activeBackground=e.activeBackground||a.styles.activeBackground,e.hoverBackground=e.hoverBackground||a.styles.hoverBackground,!e.hasHeader){t.save(),t.beginPath();const{x:o,y:l,width:c,height:i}=e.calculative.worldRect;t.fillStyle="#fff0",t.rect(o-1,l-1,c+2,i+2),t.fill(),t.clip()}$e(t,e),Ue(t,e),Xe(t,e),t.restore(),e.isFirstTime=!1}function Xe(t,e){if(!e.calculative.hover||!e.calculative.hoverCell||e.calculative.isInput||!e.calculative.isHover)return;let a=e.calculative.worldRect,o=e.calculative.canvas.mousePos;if(!(o.x>a.x&&o.x<a.x+a.width&&o.y>a.y&&o.y<a.y+a.height)){e.calculative.hover=!1,e.calculative.isHover=!1,e.calculative.hoverCell=void 0;return}const{row:l,col:c}=e.calculative.hoverCell,{x:i,y:r}=e.calculative.canvas.mousePos;if(!e.data[l])return;let s=e.data[l][c];if(typeof s=="object"||!s)return;t.save(),t.beginPath(),t.textAlign="start",t.textBaseline="middle",t.font=t.font=(e.calculative.fontStyle||"")+" normal "+(e.calculative.fontWeight||"")+" "+(e.calculative.fontSize||12)+"px "+e.calculative.fontFamily;const f=t.measureText(s).width;t.beginPath(),t.fillStyle="#fff",t.strokeStyle="#000",t.moveTo(i,r),t.rect(i-10,r,f+20,20),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="#000",t.fillText(s,i,r+10),t.restore()}function je(t){const e=[],a=[],o={};t.rowHeight||(t.rowHeight=40),t.colWidth||(t.colWidth=150);let l=0;const c=t.styles&&t.styles.filter(u=>u.col!==void 0&&u.row===void 0&&u.width);let i={};c&&c.forEach(u=>{i[u.col]=u.width});for(let u=0;u<t.data[0].length;u++){l+=(i[u]||t.colWidth)*t.calculative.canvas.store.data.scale,e.push(l);let v=t.styles&&t.styles.filter(g=>g.col===u&&g.row===void 0);v&&(o[u]=v[0])}let r=0;const s=t.styles&&t.styles.filter(u=>u.col===void 0&&u.row!==void 0&&u.height);let f={};s&&s.forEach(u=>{f[u.row]=u.height});let h=r;for(let u=0;u<t.data.length;u++)r+=(f[u]||t.rowHeight)*t.calculative.canvas.store.data.scale,a.push(r),u<t.maxNum&&(h=r);if(t.calculative.maxOffsetY=(r-h)/t.calculative.canvas.store.data.scale,t.initWorldRect)return;t.colPos=e,t.rowPos=a,t.colStyle=o,t.initScale=t.calculative.canvas.store.data.scale,t.tableWidth=l,t.tableHeight=h||r,t.calculative.width=l,t.calculative.height=h||r,t.calculative.width=l,t.calculative.height=h||r,t.height||(t.height=t.calculative.height),t.width||(t.width=t.calculative.width);let n=t.x,d=t.y;if(t.parentId){let u=t.calculative.canvas.store.pens[t.parentId];n=u.calculative.worldRect.x+u.calculative.worldRect.width*t.x,d=u.calculative.worldRect.y+u.calculative.worldRect.height*t.y}t.calculative.worldRect={x:n,y:d,height:t.calculative.height,width:t.calculative.width,center:{x:t.x+t.calculative.width/2,y:t.y+t.calculative.height/2}},t.width=t.calculative.width,t.height=t.calculative.height,t.initWorldRect||(t.initWorldRect={width:t.calculative.worldRect.width,height:t.calculative.worldRect.height}),ct(t.calculative.worldRect)}function $e(t,e){if(!e.colPos)return;const{x:a,y:o,width:l,height:c,ex:i,ey:r}=e.calculative.worldRect;t.save(),t.beginPath(),t.strokeStyle=e.color;let s=e.calculative.borderRadius||0,f=s;s<1&&(s=l*s,f=c*f);let h=s<f?s:f;if(l<2*h&&(h=l/2),c<2*h&&(h=c/2),t.moveTo(a+h,o),t.arcTo(i,o,i,r,h),t.arcTo(i,r,a,r,h),t.arcTo(a,r,a,o,h),t.arcTo(a,o,i,o,h),e.background&&(t.fillStyle=e.background,t.fill()),e.bordered!==!1&&(t.strokeStyle=e.borderColor||e.color||"#424B61",t.stroke()),e.hLine!==!1){let n=e.rowPos[e.rowPos.length-1];e.hasHeader&&(t.beginPath(),t.moveTo(e.calculative.worldRect.x,e.calculative.worldRect.y+e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight),t.lineTo(e.calculative.worldRect.ex,e.calculative.worldRect.y+e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight),t.strokeStyle=e.borderColor||e.color||"#424B61",t.stroke());for(const d of e.rowPos){if(d===n)continue;const u=d*e.calculative.worldRect.height/e.tableHeight-e.offsetY*e.calculative.canvas.store.data.scale;if(e.hasHeader){if(u<0+e.rowPos[0]||u>e.calculative.worldRect.height)continue}else if(u<0||u>e.calculative.worldRect.height)continue;t.beginPath(),t.moveTo(e.calculative.worldRect.x,e.calculative.worldRect.y+u),t.lineTo(e.calculative.worldRect.ex,e.calculative.worldRect.y+u),t.strokeStyle=e.borderColor||e.color||"#424B61",t.stroke()}}if(e.vLine!==!1){let n=e.colPos[e.colPos.length-1];e.colPos.forEach((d,u)=>{if(d===n)return;const v=d*e.calculative.worldRect.width/e.tableWidth;t.beginPath(),t.moveTo(e.calculative.worldRect.x+v,e.calculative.worldRect.y),t.lineTo(e.calculative.worldRect.x+v,e.calculative.worldRect.ey),t.strokeStyle=e.borderColor||e.color||"#424B61",t.stroke()})}t.restore()}function Ue(t,e){var o,l,c,i,r;if(!e.colPos)return;e.calculative.texts||(e.calculative.texts=[]);const a=1;for(let s=0;s<e.rowPos.length;s++){if(e.hasHeader&&s===1){t.save(),t.beginPath();const{x:h,y:n,width:d,height:u}=e.calculative.worldRect;t.fillStyle="#fff0",t.rect(h-1,n+e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight-1,d+2,u-e.rowPos[0]*e.calculative.worldRect.height/e.tableHeight+2),t.fill(),t.clip()}let{style:f}=Ke(e,s);for(let h=0;h<e.colPos.length;h++){let{value:n,style:d}=Ft(e,s,h),u=!0;if(Array.isArray(d)&&d.length>0){let k=0;d.forEach((A,P)=>{A.wheres&&A.wheres.every(M=>new Function("attr",`return attr ${M.comparison} ${M.value}`)(n))&&(k=P)}),d=d[k]}else d.wheres&&Array.isArray(d.wheres)&&(u=!1,u=d.wheres.every(function(k){return new Function("attr",`return attr ${k.comparison} ${k.value}`)(n)}));let v=e.color,g=e.textColor||e.color,y=null,C=null,w=null,S=null;u&&(v=d.color||f.color||e.color,g=d.textColor||f.textColor||e.textColor,y=d.background||f.background,C=(d.fontSize||f.fontSize||0)*e.calculative.canvas.store.data.scale,w=d.fontWeight||f.fontWeight,S=d.fontStyle||f.fontStyle);let D;e.stripe&&(e.hasHeader!==!1?s%2===1&&(y=y||e.stripeColor||"#407FFF1F"):s%2===0&&(y=y||e.stripeColor||"#407FFF1F")),e.calculative.active&&((o=e.calculative.activeCell)==null?void 0:o.row)===s&&((l=e.calculative.activeCell)==null?void 0:l.col)===h&&(v=e.activeColor,y=e.activeBackground,D=v,g=e.activeTextColor||e.activeColor),e.calculative.hover&&((c=e.calculative.hoverCell)==null?void 0:c.row)===s&&((i=e.calculative.hoverCell)==null?void 0:i.col)===h&&(v=e.hoverColor,y=e.hoverBackground,g=e.hoverTextColor||e.hoverColor,D=v);const m=Et(e,s,h);if(m.y+m.height<e.calculative.worldRect.y||m.y>e.calculative.worldRect.height+e.calculative.worldRect.y)continue;y&&(t.save(),t.beginPath(),t.fillStyle=y,t.fillRect(m.x,m.y,m.width+.25*e.calculative.canvas.store.data.scale,m.height),t.restore()),D&&(t.save(),t.beginPath(),t.strokeStyle=D,t.strokeRect(m.x,m.y,m.width,m.height),t.restore()),e.calculative.worldTextRect=m;let b=e.calculative.texts[s];if(e.calculative.texts[s]||(b=[],e.calculative.texts.push(b)),b[h]==null){if(typeof n=="object"){const k=e.styles&&e.styles.filter(A=>A.col===h&&A.row===void 0&&A.pens);if(k.length>0){if(b[h]="",e.isFirstTime){e.maxNum&&e.hasHeader&&s>=e.maxNum&&(n.visible=!1);let A=JSON.parse(JSON.stringify(k[0].pens));A.forEach(P=>{Object.assign(P,{row:s,col:h},n),P.activeBackground=P.background,P.hoverBackground=P.background,P.activeColor=P.color,P.hoverColor=P.color,P.activeTextColor=P.textColor,P.hoverTextColor=P.textColor,P.height*=e.calculative.canvas.store.data.scale,P.width*=e.calculative.canvas.store.data.scale}),_e(e,m,A),e.calculative.canvas.parent.pushChildren(e,A)}continue}}else n===void 0?b[h]="":b[h]=n.text||n+"";if(!b[h])continue;b[h]=Xt(e,b[h])}if(!b[h])continue;t.save(),t.beginPath(),t.fillStyle=g,t.textAlign="center",t.textBaseline="middle",t.font=(S||e.calculative.fontStyle||"")+" normal "+(w||e.calculative.fontWeight||"")+" "+(C||e.calculative.fontSize||12)*a+"px "+e.calculative.fontFamily;let R=e.colStyle&&((r=e.colStyle[h])==null?void 0:r.textAlign);if(R&&(t.textAlign=R),b[h].length===1)R==="left"?t.fillText(b[h][0],m.x,m.y+m.height/2):R==="right"?t.fillText(b[h][0],m.x+m.width,m.y+m.height/2):t.fillText(b[h][0],m.x+m.width/2,m.y+m.height/2);else{const A=(C||e.calculative.fontSize)*e.calculative.lineHeight*a,P=b[h].length*A;let W=(m.height-P)/2;R==="left"?b[h].forEach((M,B)=>{t.fillText(M,m.x,m.y+W+(B+.55)*A)}):R==="right"?b[h].forEach((M,B)=>{t.fillText(M,m.x+m.width,m.y+W+(B+.55)*A)}):b[h].forEach((M,B)=>{t.fillText(M,m.x+m.width/2,m.y+W+(B+.55)*A)})}t.restore()}}}function Bt(t){var e;bt(t),(e=t.children)!=null&&e.length||(t.isFirstTime=!0),t.offsetY||(t.offsetY=0),je(t)}function Ge(t,e){if(!t.calculative.hoverCell)return;const{value:a}=Ft(t,t.calculative.hoverCell.row,t.calculative.hoverCell.col);if(typeof a=="object")return;t.calculative.isHover=!1,t.calculative.isInput=!0,t.calculative.canvas.render(),t.calculative.inputCell=t.calculative.hoverCell;const o=Et(t,t.calculative.hoverCell.row,t.calculative.hoverCell.col);t.calculative.tempText=a.text||a+"",t.calculative.canvas.showInput(t,o,"#ffffff")}function qe(t,e){t.calculative.inputCell&&(Lt(t,t.calculative.inputCell.row,t.calculative.inputCell.col,e),t.calculative.isInput=!1,t.calculative.isHover=!0,t.calculative.canvas.render())}function Je(t,e){t.timer&&(t.calculative.isHover=!1,clearTimeout(t.timer)),t.timer=setTimeout(()=>{t.calculative.isHover=!0,t.calculative.canvas.render()},500),t.calculative.hoverCell=Ot(t,e),t.calculative.canvas.render()}function Ze(t,e){bt(t),t.calculative.hoverCell=void 0,t.calculative.canvas.render()}function Qe(t,e){t.calculative.activeCell=Ot(t,e),t.calculative.canvas.render()}function Ot(t,e){const a=t.calculative.worldRect.width/t.tableWidth,o=t.calculative.worldRect.height/t.tableHeight,l={row:0,col:0};for(let c=0;c<t.colPos.length;c++)e.x>t.calculative.worldRect.x+t.colPos[c]*a&&(l.col=c+1);for(let c=0;c<t.rowPos.length;c++)e.y>t.calculative.worldRect.y+t.rowPos[c]*o-t.offsetY*t.calculative.canvas.store.data.scale&&(l.row=c+1);return l}function Ft(t,e,a){if(!t.data||!Array.isArray(t.data))return;const o=t.data[e],l=t.styles&&t.styles.filter(c=>c.row===e&&c.col===a);if(Array.isArray(o))return{value:o[a],style:(l==null?void 0:l.length)>0?l.length>1?l:l[0]:{}};if(!o.data||!Array.isArray(o.data))return}function Ke(t,e){if(!t.data||!Array.isArray(t.data))return;const a=t.data[e],o=t.styles&&t.styles.filter(l=>l.row===e&&l.col===void 0);if(Array.isArray(a))return{value:a,style:(o==null?void 0:o.length)>0?o[0]:{}};if(!a.data||!Array.isArray(a.data))return}function Lt(t,e,a,o){if(!t.data||!Array.isArray(t.data))return;t.isFirstTime=!1,t.calculative.texts=void 0;let l=t.data[e];l&&(l[a]instanceof Object||(l[a]=o),t.calculative.canvas.store.emitter.emit("valueUpdate",t))}function Et(t,e,a){const o=t.calculative.worldRect.width/t.tableWidth,l=t.calculative.worldRect.height/t.tableHeight;let c=0,i=t.colPos[a]*o;a>0&&(c=t.colPos[a-1]*o);let r=0,s=t.rowPos[e]*l;e>0&&(r=t.rowPos[e-1]*l);let f=t.offsetY*t.calculative.canvas.store.data.scale;return e===0&&t.hasHeader&&(f=0),{x:t.calculative.worldRect.x+c,y:t.calculative.worldRect.y+r-f,ex:t.calculative.worldRect.x+i,ey:t.calculative.worldRect.y+s-f,width:i-c,height:s-r}}function _e(t,e,a){if(!(a&&a.length))return;const o=t.calculative.worldRect.width/t.tableWidth,l=t.calculative.worldRect.height/t.tableHeight;let c=1,i=1;t.initWorldRect&&(t.calculative.worldRect.width!==t.initWorldRect.width&&(c=t.calculative.worldRect.width/t.initWorldRect.width),t.calculative.worldRect.height!==t.initWorldRect.height&&(i=t.calculative.worldRect.height/t.initWorldRect.height));let r=0,s=0,f=0;const h=t.calculative.canvas.store.data.scale;if(a.length>1){for(const n of a)s+n.width*o+20*h*o<e.width?(n.x=e.x+s+10*h*o,n.y=e.y+f+10*h*l,s+=(n.width+10*h)*o,r=Math.max(r,f+(n.height+10*h)*l)):(s=0,f=r,n.x=e.x+s+10*h*o,n.y=e.y+f+10*h*l,r+=(n.height+10*h)*l);if(r+20*h*l<e.height){const n=(e.height-r-10*h*l)/2;for(const d of a)d.y+=n}}else a[0].x=e.x+(e.width-a[0].width)/2,a[0].y=e.y+(e.height-a[0].height)/2;a.forEach(n=>{n.width=n.width*c,n.height=n.height*i})}function pe(t){if(t.calculative.isUpdateData){delete t.calculative.isUpdateData;let e=E(t.children);t.children=[],Bt(t),e&&e.forEach(a=>{t.calculative.canvas.delForce(t.calculative.canvas.findOne(a))}),t.calculative.texts=void 0}}function ta(t,e){if(t.calculative.isUpdateData=!1,t.swiper!==void 0&&(t.swiper?bt(t):wt(t)),e.styles&&(t.initWorldRect=void 0),e.table||e.col==null&&e.row==null){if(e.dataY){const o=t.replaceMode;let l=[];return o?o===ht.Replace?(l=t.data,e.dataX&&e.dataX.forEach((c,i)=>{l[c]=e.dataY[i]})):o===ht.ReplaceAll&&(e.dataX?l[0]=e.dataX:l[0]=t.data[0],l=l.concat(e.dataY)):l=t.data.concat(e.dataY),delete e.dataX,delete e.dataY,t.calculative.isUpdateData=!0,Object.assign(e,{data:l})}(e.data||e.styles||e.maxNum||e.rowHeight||e.colWidth)&&(t.calculative.isUpdateData=!0,t.initWorldRect=null);for(let o of Object.keys(e))o.includes("data.")&&(t.calculative.isUpdateData=!0);return e}let a=t.data[e.row];return a&&(a[e.col]instanceof Object||(a[e.col]=e.value),Lt(t,e.row,e.col,e.value),t.calculative.canvas.render(),delete e.col,delete e.row),e}function ea(t,e){if(!t.locked&&!t.calculative.canvas.store.data.locked||!t.maxNum)return;let a=0;e.deltaY>0?a=4:a=-4,mt(t,a)}function mt(t,e){var a;t.offsetY||(t.offsetY=0),t.offsetY+=e,t.offsetY>t.calculative.maxOffsetY&&(t.offsetY=t.calculative.maxOffsetY),t.offsetY<0&&(t.offsetY=0),(a=t.children)==null||a.forEach(o=>{const l=t.calculative.canvas.store.pens[o];aa(t,l)}),t.calculative.canvas.render()}function aa(t,e){if(!e)return;e.oldY||(e.oldY=e.y),e.calculative.worldRect,t.calculative.worldRect;const a=t.calculative.canvas.store.data.scale;t.calculative.worldRect.height/t.tableHeight;const o=t.rowHeight;e.y=e.oldY-t.offsetY*a/t.calculative.worldRect.height;const l=o*(t.initScale||1)/t.tableHeight*t.maxNum;if(t.calculative.canvas.updatePenRect(e),t.hasHeader)if(e.y<t.rowPos[0]/t.tableHeight){if(e.calculative.visible=!1,e.visible=!1,e.y<t.rowPos[0]/t.tableHeight/2){e.oldY+=l;let c=e.row+t.maxNum;if(!t.data[c])return;let i=E(t.data[c][e.col]);i.background&&(i.activeBackground=i.background,i.hoverBackground=i.background),i.color&&(i.hoverColor=i.color,i.activeColor=i.color),i.textColor&&(i.activeTextColor=i.textColor,i.hoverTextColor=i.textColor),Object.assign(e,i,{row:c}),Object.assign(e.calculative,i,{row:c})}}else if(e.y+e.height>1){if(e.calculative.visible=!1,e.visible=!1,e.y+e.height/2>1){e.oldY-=l;let c=e.row-t.maxNum;if(!t.data[c])return;let i=E(t.data[c][e.col]);i.background&&(i.activeBackground=i.background,i.hoverBackground=i.background),i.color&&(i.hoverColor=i.color,i.activeColor=i.color),i.textColor&&(i.activeTextColor=i.textColor,i.hoverTextColor=i.textColor),Object.assign(e,i,{row:c}),Object.assign(e.calculative,i,{row:c})}}else e.visible=!0,e.calculative.visible=!0;else if(e.y<0){if(e.calculative.visible=!1,e.visible=!1,e.y<-o/t.tableHeight/2){e.oldY+=l;let c=e.row+t.maxNum;if(!t.data[c])return;let i=E(t.data[c][e.col]);i.background&&(i.activeBackground=i.background,i.hoverBackground=i.background),i.color&&(i.hoverColor=i.color,i.activeColor=i.color),i.textColor&&(i.activeTextColor=i.textColor,i.hoverTextColor=i.textColor),Object.assign(e,i,{row:c}),Object.assign(e.calculative,i,{row:c})}}else if(e.y+e.height>1){if(e.calculative.visible=!1,e.visible=!1,e.y+e.height/2>1){e.oldY-=l;let c=e.row-t.maxNum;if(!t.data[c])return;let i=E(t.data[c][e.col]);i.background&&(i.activeBackground=i.background,i.hoverBackground=i.background),i.color&&(i.hoverColor=i.color,i.activeColor=i.color),i.textColor&&(i.activeTextColor=i.textColor,i.hoverTextColor=i.textColor),Object.assign(e,i,{row:c}),Object.assign(e.calculative,i,{row:c})}}else e.calculative.visible=!0,e.visible=!0}function la(t){wt(t)}function wt(t){t.interval&&(globalThis.clearInterval(t.interval),t.interval=null)}function bt(t){if(t.maxNum&&t.swiper){if(t.interval)return;t.interval=globalThis.setInterval(()=>{t.offsetY>=t.calculative.maxOffsetY?(t.offsetY=0,oa(t)):t.offsetY%t.rowHeight?mt(t,1):(t.calculative.stap||(t.calculative.stap=0),t.calculative.stap+=1,t.calculative.stap==12&&(t.calculative.stap=0,mt(t,1)))},50)}}function oa(t){var e;(e=t.children)==null||e.forEach(a=>{const o=t.rowHeight,l=t.calculative.canvas.store.pens[a];if(!l)return;const c=o*(t.initScale||1)/t.tableHeight*t.maxNum;l.oldY-=c;const i=l.row-t.maxNum;if(!t.data[i])return;let r=E(t.data[i][l.col]);r.background&&(r.activeBackground=r.background,r.hoverBackground=r.background),r.color&&(r.hoverColor=r.color,r.activeColor=r.color),r.textColor&&(r.activeTextColor=r.textColor,r.hoverTextColor=r.textColor),l.calculative.visible=!0,l.visible=!0,Object.assign(l,r,{row:i}),Object.assign(l.calculative,r,{row:i})}),t.calculative.canvas.render()}function ia(t){wt(t)}function ra(t,e){e.onClick||(e.onClick=ca,e.setTheme=sa);let a=e.calculative.worldRect.x,o=e.calculative.worldRect.y,l=e.calculative.worldRect.width,c=e.calculative.worldRect.height;l<c*1.5&&(l=1.5*c),t.beginPath(),t.arc(a+c/2,o+c/2,c/2,Math.PI/2,Math.PI*3/2),t.lineTo(a+l-c/2,o),t.arc(a+l-c/2,o+c/2,c/2,-Math.PI/2,Math.PI/2),t.lineTo(a+c/2,o+c),e.checked?(t.fillStyle=e.onColor,(e.disabled||e.disable)&&(t.fillStyle=e.disableOnColor||L(.6,e.onColor)),e.lineWidth&&(t.strokeStyle=e.onStrokeColor,t.stroke()),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#ffffff",t.moveTo(a+c*2,o+c/2),t.arc(a+l-c/2,o+c/2,c/2>2?c/2-2:1,0,Math.PI*2),t.fill()):(t.fillStyle=e.offColor,(e.disabled||e.disable)&&(t.fillStyle=e.disableOffColor||L(.6,e.offColor)),e.lineWidth&&(t.strokeStyle=e.offStrokeColor,t.stroke()),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#ffffff",t.moveTo(a+c,o+c/2),t.arc(a+c/2,o+c/2,c/2>2?c/2-2:1,0,Math.PI*2),t.fill()),t.closePath()}function ca(t){t.disableDefaultClick||t.disabled||t.disable||(t.checked=!t.checked,t.calculative.canvas.store.emitter.emit("valueUpdate",t),t.calculative.canvas.render())}function sa(t,e){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const o=e[a];t.hasOwnProperty(a)&&(t[a]=o),t.calculative.hasOwnProperty(a)&&(t.calculative[a]=o)}t.onStrokeColor=e.borderColor,t.offStrokeColor=e.borderColor}function fa(t,e){e.onAdd||(e.onAdd=it,e.onResize=it,e.onMove=it,e.onMouseMove=ha,e.onMouseDown=Yt,e.onValue=na,e.onBeforeValue=ua,e.setTheme=da),e.calculative.barRect||it(e);const a=e.calculative.canvas.store;e.calculative.canvas.store.options;let o=e.background;e.disabled&&(o=e.disabledBackground||L(.6,o)),t.fillStyle=o,t.beginPath();let l=e.calculative.worldRect.x+e.calculative.barRect.x,c=e.calculative.worldRect.y+e.calculative.barRect.y,i=e.calculative.barRect.width,r=e.calculative.barRect.height,s=r/2;t.moveTo(l+s,c),t.arcTo(l+i,c,l+i,c+r,s),t.arcTo(l+i,c+r,l,c+r,s),t.arcTo(l,c+r,e.x,e.y,s),t.arcTo(l,c,l+i,c,s),t.fill();let f=e.activeColor||a.styles.activeColor;e.disabled&&(f=e.disabledColor||L(.6,f)),t.fillStyle=f,t.beginPath(),i=e.calculative.ballRect.x,t.moveTo(l+s,c),t.arcTo(l+i,c,l+i,c+r,s),t.arcTo(l+i,c+r,l,c+r,s),t.arcTo(l,c+r,e.x,e.y,s),t.arcTo(l,c,l+i,c,s),t.fill(),t.fillStyle=e.btnBackground||"#fff",t.strokeStyle=f,t.lineWidth=2,t.beginPath(),l=e.calculative.worldRect.x+e.calculative.ballRect.x,c=e.calculative.worldRect.y+e.calculative.ballRect.y+e.calculative.ballRect.height/2,t.lineWidth=e.calculative.ballRect.width/10,t.arc(l,c,e.calculative.ballRect.width/2,0,Math.PI*2),t.fill(),t.stroke()}function it(t){if(t._textWidth||(t._textWidth=t.textWidth||50,t._fontSize=t.fontSize||12),t.textWidth=t.calculative.worldRect.width,t.calculative.textWidth=t.textWidth,t.unit||(t.unit="%"),t.sliderWidth||(t.sliderWidth=t.width),t.sliderHeight||(t.sliderHeight=t.height),!t.calculative.worldRect)return;const e=t.calculative.worldRect.width/t.sliderWidth,a=t.calculative.worldRect.height/t.sliderHeight,o=Math.min(e,a);t.fontSize=t._fontSize*o;const l=t.calculative.worldRect.width-t._textWidth*o;t.textLeft=l+10*o,t.calculative.textLeft=t.textLeft,t.calculative.barRect={x:0,y:(t.calculative.worldRect.height-t.barHeight*a)/2,width:l,height:t.barHeight*a},ct(t.calculative.barRect),Tt(t)}function Tt(t){const e=t.calculative.barRect.height*3.5,a=t.calculative.barRect.width*t.value/100;t.calculative.ballRect={x:a,y:(t.calculative.worldRect.height-e)/2,width:e,height:e},ct(t.calculative.ballRect),t.calculative.text=t.value+t.unit,It(t)}function Yt(t,e){if(t.disabled)return;const a=e.x-t.calculative.worldRect.x;if(a>t.calculative.barRect.width)return;let o=Math.round(a/t.calculative.barRect.width*100);o<t.min||o>t.max||o<0||o>100||(t.value=o,Tt(t),t.calculative.text=t.value+t.unit,It(t),t.calculative.canvas.store.emitter.emit("valueUpdate",t),t.calculative.canvas.render())}function ha(t,e){t.calculative.canvas.mouseDown&&Yt(t,e)}function na(t){t.calculative.isUpdateData&&(delete t.calculative.isUpdateData,it(t)),Tt(t)}function ua(t,e){return t.calculative.isUpdateData=!1,(e.textWidth||e.barHeight)&&(e.textWidth&&(t._textWidth=0),t.calculative.isUpdateData=!0),e}function da(t,e){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const o=e[a];t.hasOwnProperty(a)&&(t[a]=o),t.calculative.hasOwnProperty(a)&&(t.calculative[a]=o)}t.background=e.sliderBg,t.calculative.background=e.sliderBg,t.btnBackground=e.sliderBtnBg,t.calculative.btnBackground=e.sliderBtnBg,t.activeColor=e.tabActiveBg,t.calculative.activeColor=e.tabActiveBg}function va(t,e){e.onMouseDown||(e.onMouseDown=ga),e.options||(e.options=e.data);let a=e.calculative.worldRect.x,o=e.calculative.worldRect.y,l=e.calculative.worldRect.height;e.calculative.worldRect.width;const{fontStyle:c,fontWeight:i,fontSize:r,fontFamily:s,lineHeight:f}=e.calculative;let h=2;t.beginPath(),t.moveTo(a,o),t.arcTo(a+l,o,a+l,o+l,h),t.arcTo(a+l,o+l,a,o+l,h),t.arcTo(a,o+l,a,o,h),t.arcTo(a,o,a+l,o,h),t.strokeStyle="#d9d9d9",t.fillStyle="#ffffff00",e.checked&&(t.fillStyle=e.background||"#1890ff",t.strokeStyle=e.background||"#1890ff"),(e.isForbidden||e.disabled)&&(t.fillStyle=e.disabledBackground||L(.6,e.background)||"#ebebeb",t.strokeStyle=e.disabledColor||L(.6,e.color)||"#d9d9d9"),t.closePath(),t.fill(),t.stroke(),t.save(),e.checked&&(t.beginPath(),t.lineWidth=l/10,t.strokeStyle="#ffffff",t.moveTo(a+102/506*l,o+l/2),t.lineTo(a+220/506*l,o+346/460*l),t.lineTo(a+404/506*l,o+142/460*l),t.stroke()),t.restore(),t.save(),t.fillStyle=e.disabled||e.isForbidden?e.disabledTextColor||L(.6,e.textColor||e.color)||"#00000040":gt(e,e.calculative.canvas.parent.store)||"#000000d9",t.textAlign="start",t.textBaseline="middle",t.font=G({fontStyle:c,fontWeight:i,fontFamily:s||e.calculative.canvas.parent.store.options.fontFamily,fontSize:r,lineHeight:f}),t.fillText(e.value+"",a+l+10,o+l/2),t.restore()}function ga(t,e){t.isForbidden||(t.checked=!t.checked,t.calculative.canvas.store.emitter.emit("valueUpdate",t),t.calculative.canvas.render())}function ya(t,e){e.options||(e.options=e.data),e.onAdd||(e.onAdd=ma,e.optionPos||(e.onAdd(e),e.calculative.canvas.parent.active([e])),e.onMouseDown=wa,e.onValue=ba,e.onBeforeValue=Ta);let a=e.calculative.worldRect.x,o=e.calculative.worldRect.y,l=e.calculative.worldRect.height,c=e.calculative.worldRect.width;if(!e.optionPos)return;const{fontStyle:i,fontWeight:r,fontSize:s,fontFamily:f,lineHeight:h}=e.calculative;if(e.direction=="horizontal")for(let n=0;n<e.optionPos.length;n++){const d=e.optionPos[n]*c/e.checkboxWidth,u=e.options[n].isForbidden||e.disabled;t.beginPath(),t.arc(a+d+l/2,o+l/2,l/2,0,Math.PI*2),t.strokeStyle="#d9d9d9",t.fillStyle="#ffffff00",e.options[n].text===e.checked&&(t.strokeStyle=e.options[n].background||e.background||"#1890ff"),u&&(t.fillStyle=e.disabledBackground||L(.6,e.background)||"#ebebeb",t.strokeStyle=e.disabledColor||L(.6,e.color)||"#d9d9d9",e.options[n].text===e.checked&&(t.fillStyle="#ffffff00")),t.closePath(),t.fill(),t.stroke(),t.save(),e.options[n].text===e.checked&&(t.beginPath(),t.strokeStyle=e.options[n].background?e.options[n].background+"20":e.background||"#1890ff20",u&&(t.strokeStyle=e.disabledBackground||L(.6,e.background)||"#ebebeb"),t.arc(a+l/2+d,o+l/2,l/2+1.5,0,Math.PI*2),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle=e.options[n].background||e.background||"#1890ff",u&&(t.fillStyle=e.disabledBackground||L(.6,e.background)||"#ebebeb"),t.arc(a+l/2+d,o+l/2,l/4,0,Math.PI*2),t.fill(),t.closePath()),t.restore(),t.save(),t.fillStyle=u?e.disabledTextColor||"#00000040":gt(e,e.calculative.canvas.parent.store)||"#000000d9";const v=e.calculative.worldRect.height*14/16;t.textAlign="start",t.textBaseline="middle",t.font=G({fontStyle:i,fontWeight:r,fontFamily:f||e.calculative.canvas.parent.store.options.fontFamily,fontSize:v,lineHeight:h}),t.fillText(e.options[n].text,a+l+d+10/e.checkboxWidth*c,o+l/2),t.restore()}else if(e.direction=="vertical"){const n=e.optionHeight*l/e.checkboxHeight;for(let d=0;d<e.optionPos.length;d++){const u=e.optionPos[d]*l/e.checkboxHeight,v=e.options[d].isForbidden;t.beginPath(),t.arc(a+n/2,o+n/2+u,n/2,0,Math.PI*2),t.strokeStyle="#d9d9d9",t.fillStyle="#ffffff00",e.options[d].text===e.checked&&(t.strokeStyle=e.options[d].background||"#1890ff"),v&&(t.fillStyle="#ebebeb",t.strokeStyle="#d9d9d9"),t.closePath(),t.fill(),t.stroke(),t.save(),!v&&e.options[d].text===e.checked&&(t.beginPath(),t.strokeStyle=e.options[d].background?e.options[d].background+"20":"#1890ff20",t.arc(a+n/2,o+n/2+u,n/2+1.5,0,Math.PI*2),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle=e.options[d].background||"#1890ff",t.arc(a+n/2,o+n/2+u,n/4,0,Math.PI*2),t.fill(),t.closePath()),t.restore(),t.save(),t.fillStyle=v?"#00000040":gt(e,e.calculative.canvas.parent.store)||"#000000d9";const g=14*e.calculative.worldRect.height/e.checkboxHeight;t.textAlign="start",t.textBaseline="middle",t.font=G({fontStyle:i,fontWeight:r,fontFamily:f||e.calculative.canvas.parent.store.options.fontFamily,fontSize:g,lineHeight:h}),t.fillText(e.options[d].text,a+n+10,o+n/2+u),t.restore()}}}function ma(t){Ht(t)}function wa(t,e){if(t.direction=="horizontal")for(let a=0;a<t.optionPos.length;a++)!t.options[a].isForbidden&&e.x>t.calculative.worldRect.x+t.optionPos[a]*t.calculative.worldRect.width/t.checkboxWidth&&e.x<t.calculative.worldRect.x+(t.optionPos[a]+t.height)/t.checkboxWidth*t.calculative.worldRect.width+Wt(t.options[a].text,t)+10/t.checkboxWidth*t.calculative.worldRect.width&&(t.checked=t.options[a].text,t.calculative.canvas.store.emitter.emit("valueUpdate",t));else if(t.direction=="vertical"){const a=t.calculative.worldRect.height/t.checkboxHeight;for(let o=0;o<t.optionPos.length;o++)!t.options[o].isForbidden&&e.y>t.calculative.worldRect.y+t.optionPos[o]*a&&e.y<t.calculative.worldRect.y+(t.optionPos[o]+t.optionHeight)*a&&(t.checked=t.options[o].text,t.calculative.canvas.store.emitter.emit("valueUpdate",t))}t.calculative.canvas.render()}function ba(t){t.calculative.flag&&Ht(t)}function Ta(t,e){return t.calculative.flag=!1,(e.options!==void 0||e.direction!==void 0||e.optionInterval!==void 0||e.optionHeight!==void 0)&&(t.calculative.flag=!0),e}function Pa(){return{radio:ya,switch:ra,slider:fa,checkbox:va,table:Ct,table2:Ct}}const Ra=15;function Z(t,e=Ra){let a=""+t;return a.indexOf(".")>=0&&(a=Number.parseFloat(a).toFixed(e)),Number.parseFloat(a)}function dt(t){return typeof t=="number"&&Number.isFinite(t)}function ka(t){t={max:null,min:null,splitNumber:4,symmetrical:!1,deviation:!1,preferZero:!1,...t};const e=[10,15,20,25,30,40,50,60,70,80,90,100,150];let{max:a,min:o,splitNumber:l,symmetrical:c,deviation:i,preferZero:r}=t;if(!dt(a)||!dt(o)||a<o)return{splitNumber:l};if(a===o&&a===0)return{max:Z(e[0]*l),min:o,interval:e[0],splitNumber:l};a===o&&(r=!0),(!dt(l)||l<=0)&&(l=4),r&&a*o>0&&(a<0?a=0:o=0);const s=(a-o)/l;let f=Math.floor(Math.log10(s)-1);f=Math.pow(10,f);const h=s/f;let n=e[0]*f,d=-1,u;for(u=0;u<e.length;u++)if(e[u]>h){n=e[u]*f;break}let v=a,g=o;function y(w){if(v=parseInt(""+(a/w+1))*w,g=parseInt(""+(o/w-1))*w,a===0&&(v=0),o===0&&(g=0),c&&v*g<0){const S=Math.max(Math.abs(v),Math.abs(g));v=S,g=-S}}if(y(n),i)return{max:Z(v),min:Z(g),interval:Z(n),splitNumber:Math.round((v-g)/n)};if(!c||v*g>0){let w;t:do{if(w=Math.round((v-g)/n),(u-d)*(w-l)<0){for(;w<l;)if(g-o<=v-a&&g!==0||v===0?g-=n:v+=n,w++,w===l)break t}if(u>=e.length-1||u<=0||w===l)break;d=u,w>l?n=e[++u]*f:n=e[--u]*f,y(n)}while(w!==l)}v=Z(v),g=Z(g);const C=Z((v-g)/l);return{max:v,min:g,interval:C,splitNumber:l}}function xt(t,e){var y,C,w,S,D,m,b,R,k,A,P,W,M,B,q,Y,O,J,x,z,N,V,X,j,$,p,tt,et;const a=e.calculative.worldRect.x,o=e.calculative.worldRect.y,l=e.calculative.worldRect.width,c=e.calculative.worldRect.height;let i=e.calculative.canvas.store.data.scale,r=[];if(e.echarts)for(let I=0;I<e.echarts.option.series.length;I++)r.push(e.echarts.option.series[I].data);else r=e.data;let s=[];for(let I=0;I<r.length;I++)s=s.concat(r[I]);let f={max:Math.max.apply(null,s),min:Math.min.apply(null,s),splitNumber:5},h=ka(f),n=e.echarts?e.echarts.option.xAxis.data.length:e.xAxisData.length;t.beginPath(),t.strokeStyle="#BFBFBF",t.lineWidth=6*i,t.lineCap="butt";let d=(l-1*(n+1))/n;t.setLineDash([1,d]),t.moveTo(a,o+c+3*i),t.lineTo(a+l,o+c+3*i),t.stroke(),t.closePath(),t.beginPath(),t.lineWidth=1*i,t.setLineDash([]),t.moveTo(a,o+c),t.lineTo(a+l,o+c),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle="#BFBFBF",t.strokeStyle="#E9E9E9",t.setLineDash([2,2]);let u={fontStyle:((C=(y=e.yAxis)==null?void 0:y.axisLabel)==null?void 0:C.fontStyle)||e.fontStyle,textDecoration:(S=(w=e.yAxis)==null?void 0:w.axisLabel)==null?void 0:S.textDecoration,fontWeight:((m=(D=e.yAxis)==null?void 0:D.axisLabel)==null?void 0:m.fontWeight)||e.fontWeight,fontFamily:((R=(b=e.yAxis)==null?void 0:b.axisLabel)==null?void 0:R.fontFamily)||e.fontFamily,fontSize:((A=(k=e.yAxis)==null?void 0:k.axisLabel)==null?void 0:A.fontSize)||e.fontSize,lineHeight:((W=(P=e.yAxis)==null?void 0:P.axisLabel)==null?void 0:W.lineHeight)||e.lineHeight};t.fillStyle=((B=(M=e.yAxis)==null?void 0:M.axisLabel)==null?void 0:B.fontColor)||e.color;for(let I=0;I<h.splitNumber+1;I++){let U=I*c/h.splitNumber;t.textAlign="right",t.textBaseline="middle",t.font=G(u),t.fillText(h.max-I*h.interval+"",a-10*i,o+U),t.fill(),I<h.splitNumber&&(t.beginPath(),t.moveTo(a,o+U),t.lineTo(a+l,o+U),t.stroke())}t.closePath(),t.beginPath(),t.strokeStyle="#BFBFBF";let v=e.echarts?e.echarts.option.xAxis.data:e.xAxisData,g=0;for(let I=0;I<v.length;I++){g=a+(1+d/2)+(d+1)*I,t.textAlign="center",t.textBaseline="top";let U={fontStyle:((Y=(q=e.xAxis)==null?void 0:q.axisLabel)==null?void 0:Y.fontStyle)||e.calculative.fontStyle,textDecoration:(J=(O=e.xAxis)==null?void 0:O.axisLabel)==null?void 0:J.textDecoration,fontWeight:((z=(x=e.xAxis)==null?void 0:x.axisLabel)==null?void 0:z.fontWeight)||e.calculative.fontWeight,fontFamily:((V=(N=e.xAxis)==null?void 0:N.axisLabel)==null?void 0:V.fontFamily)||e.calculative.fontFamily,fontSize:((j=(X=e.xAxis)==null?void 0:X.axisLabel)==null?void 0:j.fontSize)||e.calculative.fontSize,lineHeight:((p=($=e.xAxis)==null?void 0:$.axisLabel)==null?void 0:p.lineHeight)||e.calculative.lineHeight};t.font=G(U),t.fillStyle=((et=(tt=e.xAxis)==null?void 0:tt.axisLabel)==null?void 0:et.fontColor)||e.calculative.color,t.fillText(v[I],g,o+c+10*i),t.fill()}return t.closePath(),t.setLineDash([]),{dash:d,normalizedOption:h}}function Aa(t,e){if(!isNaN(t))return e===-1?t:Math.round(Number(t)*1e3)/1e3}var _;(function(t){t[t.Add=0]="Add",t[t.Replace=1]="Replace",t[t.ReplaceAll=2]="ReplaceAll"})(_||(_={}));function Ca(t,e){e.onBeforeValue||(e.onBeforeValue=zt);const a=e.calculative.worldRect.x,o=e.calculative.worldRect.y;e.calculative.worldRect.width;const l=e.calculative.worldRect.height;let c=e.calculative.canvas.store.data.scale,i=[];e.echarts&&!e.echarts.option.color&&(e.echarts.option.color=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]);let r=xt(t,e),s=r.dash,f=r.normalizedOption;const h=!!(e.echarts?e.echarts.option.series[0].smooth:e.smooth);let n=[];if(e.echarts)for(let d=0;d<e.echarts.option.series.length;d++)i.push(e.echarts.option.series[d].data);else i=e.data;for(let d=0;d<i.length;d++){t.beginPath();let u=i[d];t.strokeStyle=e.echarts?e.echarts.option.color[d]:e.chartsColor[d],t.fillStyle=e.echarts?e.echarts.option.color[d]:e.chartsColor[d];let v=a+(1+s/2),g=o+l-(u[0]-f.min)/(f.max-f.min)*l;if(t.moveTo(v,g),n.push({x:v,y:g}),h)if(u.length<=2)for(let y=1;y<u.length;y++)v=a+(1+s/2)+(s+1)*y,g=o+l-(u[y]-f.min)/(f.max-f.min)*l,t.lineTo(v,g),n.push({x:v,y:g});else{let y,C,w,S;u.forEach((D,m)=>{v=a+(1+s/2)+(s+1)*m,g=o+l-(u[m]-f.min)/(f.max-f.min)*l;let b=a+(1+s/2)+(s+1)*(m+1),R=o+l-(u[m+1]-f.min)/(f.max-f.min)*l,k=a+(1+s/2)+(s+1)*(m-1),A=o+l-(u[m-1]-f.min)/(f.max-f.min)*l,P=a+(1+s/2)+(s+1)*(m+2),W=o+l-(u[m+2]-f.min)/(f.max-f.min)*l;m===0?(k=a+(1+s/2)+(s+1)*m,A=o+l-(u[m]-f.min)/(f.max-f.min)*l):m===u.length-2&&(P=a+(1+s/2)+(s+1)*(m+1),W=o+l-(u[m+1]-f.min)/(f.max-f.min)*l),n.push({x:v,y:g}),y=v+(b-k)/4,C=g+(R-A)/4,w=b-(P-v)/4,S=R-(W-g)/4,t.bezierCurveTo(y,C,w,S,b,R)})}else for(let y=1;y<u.length;y++)v=a+(1+s/2)+(s+1)*y,g=o+l-(u[y]-f.min)/(f.max-f.min)*l,t.lineTo(v,g),n.push({x:v,y:g});t.stroke(),t.closePath(),t.save(),n.forEach((y,C)=>{t.beginPath(),t.strokeStyle="#fff",t.lineWidth=2*c,t.arc(y.x,y.y,4*c,0,Math.PI*2),t.stroke(),t.fill(),t.closePath()}),t.restore(),n=[]}}function zt(t,e){if(e.xAxisData||e.data||!e.dataX&&!e.dataY)return e;const a=t.xAxisData,o=t.data,l=t.replaceMode;let c=[],i=[];return l?l===_.Replace?(e.dataX.forEach((r,s)=>{let f=a.indexOf(r);o.forEach((h,n)=>{h[f]=e.dataY[n][s]})}),c=a,i=o):l===_.ReplaceAll&&(c=e.dataX,i=e.dataY):(c=[...a,...e.dataX],o.forEach((r,s)=>{let f=[...r,...e.dataY[s]];i.push(f)})),delete e.dataX,delete e.dataY,Object.assign(e,{xAxisData:c,data:i})}function Sa(t,e){var h,n;e.onBeforeValue||(e.onBeforeValue=Da);let a=e.calculative.canvas.store.data.scale;const o=e.calculative.worldRect.x,l=e.calculative.worldRect.y,c=e.calculative.worldRect.width,i=e.calculative.worldRect.height,r=!!e.echarts;e.echarts?(e.echarts.option.color||(e.echarts.option.color=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]),e.chartsColor=e.echarts.option.color):e.chartsColor||(e.chartsColor=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]);const s=r?e.echarts.option.series:e.data;let f=0;for(let d=0;d<s.length;d++){let u=s[d],v=c/2;i<c&&(v=i/2);const g=o+c/2,y=l+i/2;let C=0;r?C=u.data.reduce((R,k)=>R+k.value,0):C=u.reduce((R,k)=>R+k.value,0);const w=v*parseFloat(r?u.radius[0]:e.chartsRadius[d][0])/100,S=v*parseFloat(r?u.radius[1]:e.chartsRadius[d][1])/100;if(w>S)return;let D=0,m=0;t.strokeStyle=r&&((h=u.itemStyle)==null?void 0:h.borderColor)||"#fff",t.lineWidth=(r&&((n=u.itemStyle)==null?void 0:n.borderWidth)||2)*a;const b=r?u.data:u;b.forEach((R,k)=>{var Y,O,J,x,z,N,V,X,j,$;m+=Math.PI*2*R.value/C,t.beginPath();let A=f+k;A>=e.chartsColor.length&&(A=A%e.chartsColor.length),t.fillStyle=r?e.echarts.option.color[A]:e.chartsColor[A],t.moveTo(g+w*Math.sin(m),y-w*Math.cos(m)),t.arc(g,y,w,-Math.PI/2+m,-Math.PI/2+D,!0),t.lineTo(g+S*Math.sin(D),y-S*Math.cos(D)),t.arc(g,y,S,-Math.PI/2+D,-Math.PI/2+m),t.lineTo(g+w*Math.sin(m),y-w*Math.cos(m)),t.stroke(),t.fill(),t.closePath();let P=(D+m)/2,W=g+(S+10*a)*Math.sin(P),M=y-(S+10*a)*Math.cos(P),B=t.fillStyle;u.label||(u.label={position:"outside",show:!0}),r&&["inner","inside"].includes(u.label.position)?(t.fillStyle="#ffffff",W=g+(S-w)/2*Math.sin(P),M=y-(S-w)/2*Math.cos(P)):r&&u.label.position=="outside",u.labelLine||(u.labelLine={show:!0}),(r&&u.labelLine.show!==!1||!r)&&(t.beginPath(),t.strokeStyle=r?e.echarts.option.color[f+k]:e.chartsColor[f+k],t.moveTo(g+S*Math.sin(P),y-S*Math.cos(P)),t.lineTo(W,M));let q={fontStyle:((Y=e.tickLabel)==null?void 0:Y.fontStyle)||e.calculative.fontStyle,fontWeight:((O=e.tickLabel)==null?void 0:O.fontWeight)||e.calculative.fontWeight,fontFamily:((J=e.tickLabel)==null?void 0:J.fontFamily)||e.calculative.fontFamily,lineHeight:((x=e.tickLabel)==null?void 0:x.lineHeight)||e.calculative.lineHeight,fontSize:(((z=e.tickLabel)==null?void 0:z.fontSize)||e.calculative.fontSize)*a};t.font=G(q),t.textBaseline="middle",t.textAlign="center",P>Math.PI?((r&&u.label.position==="outside"||!r)&&(t.textAlign="end"),(r&&u.labelLine.show!==!1||!r&&(((V=(N=e.tickLabel)==null?void 0:N.labelLine)==null?void 0:V.show)??!0))&&t.lineTo(W-5*a,M),(r&&u.label.show!==!1||!r&&(((X=e.tickLabel)==null?void 0:X.show)??!0))&&t.fillText(R.name,W-5*a,M)):((r&&u.label.position==="outside"||!r)&&(t.textAlign="start"),(r&&u.labelLine.show!==!1||!r)&&t.lineTo(W+5*a,M),(r&&u.label.show!==!1||!r&&(((j=e.tickLabel)==null?void 0:j.show)??!0))&&t.fillText(R.name,W+5*a,M)),t.stroke(),t.closePath(),t.fillStyle=B,t.strokeStyle=r&&(($=u.itemStyle)==null?void 0:$.borderColor)||"#fff",D=m}),f+=b.length}}function Da(t,e){if(e.data||!e.dataX&&!e.dataY)return e;const a=t.data,o=t.replaceMode;let l=[];return o?o===_.Replace?(e.dataY.forEach((c,i)=>{c.forEach((r,s)=>{let f=a[i].filter(h=>h.name===r.name);f.length>0&&(f[0].value=r.value)})}),l=a):o===_.ReplaceAll&&(l=e.dataY):a.forEach((c,i)=>{let r=[...c,...e.dataY[i]];l.push(r)}),delete e.dataX,delete e.dataY,Object.assign(e,{data:l})}function Ma(t,e){e.onBeforeValue||(e.onBeforeValue=zt);let a=e.calculative.canvas.store.data.scale;const o=e.calculative.worldRect.x,l=e.calculative.worldRect.y;e.calculative.worldRect.width;const c=e.calculative.worldRect.height;let i=[];if(e.echarts&&!e.echarts.option.color&&(e.echarts.option.color=["#1890ff","#2FC25B","#FACC14","#c23531","#2f4554","#61a0a8","#d48265"]),e.echarts)for(let n=0;n<e.echarts.option.series.length;n++)i.push(e.echarts.option.series[n].data);else i=e.data;let r=xt(t,e),s=r.dash,f=r.normalizedOption,h=s*4/5/i.length;for(let n=0;n<i.length;n++){t.beginPath();let d=i[n];t.fillStyle=e.echarts?e.echarts.option.color[n]:e.chartsColor[n],t.strokeStyle="#ffffff",t.lineWidth=1*a;let u=0,v=0,g=0;for(let y=0;y<d.length;y++)u=o+(1+.1*s)+(s+1)*y+h*n,g=(d[y]-f.min)/(f.max-f.min)*c,v=l+c-g,t.rect(u,v,h-1,g-1),t.stroke(),t.fill();t.closePath()}}function Ia(t,e){var x,z,N,V,X,j,$,p,tt,et,I,U,Pt,Rt;e.onAdd||(e.onAdd=Wa,e.onDestroy=Ha,e.onClick=Ba,e.clockInterval&&(e.onDestroy(e),e.onAdd(e)));const a=e.calculative.worldRect.x,o=e.calculative.worldRect.y,l=e.calculative.worldRect.width,c=e.calculative.worldRect.height;let i=e.calculative.canvas.store.data.scale,r={startAngle:225,endAngle:-45,min:0,max:100,splitNumber:10};if(e.echarts&&e.echarts.option){let T=e.echarts.option.series[0];e.startAngle=T.startAngle||r.startAngle,e.endAngle=T.endAngle||r.endAngle,e.min=T.min||r.min,e.max=T.max||r.max,e.axisLine=T.axisLine.lineStyle.color,e.unit=T.detail.formatter.replace("{value}",""),e.value=T.data[0].value,e.splitNumber=T.splitNumber||r.splitNumber}e={...r,...e};let s=l>c?c/2*9/10:l/2*9/10,f=a+l/2,h=o+c/2,n=e.echarts?e.echarts.option.series[0].data[0].value:e.value,d,u=e.startAngle-e.endAngle,v=e.background||"#E6EBF8";t.strokeStyle=v;let g=s/10;t.lineWidth=g,t.beginPath(),t.lineCap="round",t.arc(f,h,s,-e.startAngle/180*Math.PI,-e.endAngle/180*Math.PI),t.stroke(),t.closePath();let y=0;if(e.axisLine&&!e.isClock)for(let T=e.axisLine.length-1;T>=0;T--)e.axisLine[T][0]*(e.max-e.min)<n?y=e.axisLine[T][0]:(y=(n-e.min)/(e.max-e.min),d=e.axisLine[T][1]),t.beginPath(),t.strokeStyle=e.axisLine[T][1],t.arc(f,h,s,-e.startAngle/180*Math.PI,(-e.startAngle+y*u)/180*Math.PI),t.stroke(),t.closePath();t.lineCap="butt";let C=2*i,w=s-g;w<0&&(w=0);let S=u/180*Math.PI*w,D=(S-C*e.splitNumber)/e.splitNumber,m=u/180*Math.PI*C/2/S;t.beginPath(),t.strokeStyle=e.color||"#999999",t.lineWidth=s/20,t.setLineDash([C,D]),t.arc(f,h,w,-e.startAngle/180*Math.PI-m,-e.endAngle/180*Math.PI+m),t.stroke(),t.closePath();let b=1*i,R=s-g;R<0&&(R=0);let k=u/180*Math.PI*R,A=(k-b*5*e.splitNumber)/5/e.splitNumber,P=u/180*Math.PI*b/2/k;t.beginPath(),t.strokeStyle=e.color||"#999999",t.lineWidth=s/40,t.setLineDash([b,A]),t.arc(f,h,R,-e.startAngle/180*Math.PI-P,-e.endAngle/180*Math.PI+P),t.stroke(),t.closePath(),t.beginPath();let W=e.max-e.min,M=W/e.splitNumber,B={fontStyle:((x=e.tickLabel)==null?void 0:x.fontStyle)||e.calculative.fontStyle,textDecoration:((z=e.tickLabel)==null?void 0:z.textDecoration)||e.textDecoration,fontWeight:((N=e.tickLabel)==null?void 0:N.fontWeight)||e.calculative.fontWeight,fontFamily:((V=e.tickLabel)==null?void 0:V.fontFamily)||e.calculative.fontFamily,fontSize:(((X=e.tickLabel)==null?void 0:X.fontSize)||e.calculative.fontSize)*i,lineHeight:((j=e.tickLabel)==null?void 0:j.lineHeight)||e.calculative.lineHeight};t.font=G(B);let q=s-g-s/20;for(let T=0;T<=e.splitNumber;T++){if(Math.abs(e.startAngle)+Math.abs(e.endAngle)===360&&T==0)continue;let F=e.startAngle-M*T/W*u,H=Math.cos(F/180*Math.PI),Q=Math.sin(F/180*Math.PI);t.fillStyle=(($=e.tickLabel)==null?void 0:$.color)||"#999999",H>.02?t.textAlign="end":H<-.02?t.textAlign="start":t.textAlign="center",Q>.02?t.textBaseline="top":Q<-.02?t.textBaseline="bottom":t.textBaseline="middle",t.fillText(Aa(M*T+e.min,1),f+q*H,h-q*Q),t.fill()}t.closePath();let Y=1,O=["value"];if(e.isClock&&(Y=3,O=["hourvalue","minutevalue","secondvalue"]),e.isClock)for(let T=0;T<Y;T++){let F=(e.startAngle-(e[O[T]]-e.min)/(e.max-e.min)*u)/180*Math.PI;T>0&&(F=(e.startAngle-(e[O[T]]-e.min)/(e.max*5-e.min)*u)/180*Math.PI);let H=4/5*s;O[T]==="hourvalue"&&(H=3/5*s),O[T]==="minutevalue"&&(H=3.5/5*s);let Q=s*1/40;t.beginPath(),t.setLineDash([]),t.lineWidth=s/(T+1)/20,t.strokeStyle=e.color||"#999999",t.moveTo(f-Q*3*Math.cos(F),h+Q*3*Math.sin(F)),t.lineTo(f+H*Math.cos(F),h-H*Math.sin(F)),t.stroke()}else{let T=(e.startAngle-(n-e.min)/(e.max-e.min)*u)/180*Math.PI,F=4/5*s,H=s*1/40;t.beginPath(),t.setLineDash([]),t.lineWidth=2,t.fillStyle=d,t.moveTo(f-H*3*Math.cos(T),h+H*3*Math.sin(T)),t.lineTo(f+H*Math.cos(T-Math.PI/2),h-H*Math.sin(T-Math.PI/2)),t.lineTo(f+F*Math.cos(T),h-F*Math.sin(T)),t.lineTo(f+H*Math.cos(T+Math.PI/2),h-H*Math.sin(T+Math.PI/2)),t.lineTo(f-H*3*Math.cos(T),h+H*3*Math.sin(T)),t.fill()}t.beginPath(),t.textAlign="center",t.textBaseline="middle";let J={fontStyle:((p=e.titleLabel)==null?void 0:p.fontStyle)||e.calculative.fontStyle,textDecoration:((tt=e.titleLabel)==null?void 0:tt.textDecoration)||e.textDecoration,fontWeight:((et=e.titleLabel)==null?void 0:et.fontWeight)||e.calculative.fontWeight,fontFamily:((I=e.titleLabel)==null?void 0:I.fontFamily)||e.calculative.fontFamily,fontSize:(((U=e.titleLabel)==null?void 0:U.fontSize)||e.calculative.fontSize)*i,lineHeight:((Pt=e.titleLabel)==null?void 0:Pt.lineHeight)||e.calculative.lineHeight};t.font=G(J),t.fillStyle=((Rt=e.titleLabel)==null?void 0:Rt.color)||d,e.isClock?t.fillText(("0"+parseInt(e.hourvalue)).slice(-2)+":"+("0"+parseInt(e.minutevalue)).slice(-2)+":"+("0"+parseInt(e.secondvalue)).slice(-2),f,h+s/2):t.fillText(n+" "+(e.unit||""),f,h+s/2),t.fill(),e.isClock&&(t.beginPath(),t.fillStyle=e.color||"#999999",t.strokeStyle="#ffffff",t.arc(f,h,s/20,0,Math.PI*2),t.stroke(),t.fill(),t.closePath())}function Wa(t){if(t.isClock)t.clockInterval=setInterval(()=>{let e=new Date,a=e.getSeconds(),o=e.getMinutes()+a/60,l=e.getHours()%12+o/60;t.calculative.canvas.parent.setValue({id:t.id,hourvalue:l,minutevalue:o,secondvalue:a},{render:!0,doEvent:!1})},1e3);else{const e=t.value;t.value=0,t.frames=[{duration:2e3,value:e}],t.calculative.canvas.parent.startAnimate(t.id),setTimeout(()=>{t.value=e},1e3)}}function Ha(t){t.clockInterval&&(clearInterval(t.clockInterval),t.clockInterval=void 0)}function Ba(t){t.isClock&&(t.onDestroy(t),t.onAdd(t))}function Oa(){return{lineChart:Ca,histogram:Ma,pieChart:Sa,gauge:Ia}}function Fa(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/6,s=c/4;if(a.moveTo(o+s*2,l+0),a.lineTo(o+s*2,l+r),a.moveTo(o,l+r+s*2),a.arc(o+s*2,l+r+s*2,s*2,Math.PI*1,Math.PI*2,!1),a.lineTo(o+s*4,l+r*5),a.lineTo(o,l+r*5),a.lineTo(o,l+r+s*2),a.moveTo(o+s,l+r*5),a.lineTo(o+s,l+r*6),a.moveTo(o+s*2,l+r*5),a.lineTo(o+s*2,l+r*6),a.moveTo(o+s*3,l+r*5),a.lineTo(o+s*3,l+r*6),a.closePath(),a instanceof Path2D)return a}function St(t){const e=[{x:.5,y:0},{x:.25,y:1},{x:.5,y:1},{x:.75,y:1}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function La(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i-c,s=.5*c;if(a.moveTo(o+c/2,l),a.lineTo(o+c/2,l+r),a.moveTo(o+c,l+s+r),a.arc(o+c/2,l+s+r,s,0,Math.PI*2,!1),a.closePath(),a instanceof Path2D)return a}function Dt(t){const e=[{x:.5,y:0},{x:.5,y:1}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function Ea(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/2,s=c/5;if(a.moveTo(o,l+r),a.lineTo(o+s,l+r),a.moveTo(o+s*5,l+r),a.ellipse(o+s*3,l+r,2*s,r,0,0,Math.PI*2),a.closePath(),a instanceof Path2D)return a}function Ya(t){const e=[{x:.6,y:0},{x:1,y:.5},{x:.6,y:1},{x:0,y:.5}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function xa(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/4,s=.5*c;if(a.moveTo(o+s,l),a.lineTo(o+s,l+r),a.moveTo(o,l+r),a.rect(o,l+r,s*2,r*2),a.moveTo(o+s,l+3*r),a.lineTo(o+s,l+4*r),a.closePath(),a instanceof Path2D)return a}function za(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/8,s=.25*c;if(a.moveTo(o+s*2,l),a.lineTo(o+s*2,l+r*2),a.lineTo(o+s*3,l+r*3),a.lineTo(o+s*3,l+r*5),a.lineTo(o+s*2,l+r*6),a.lineTo(o+s*1,l+r*5),a.lineTo(o+s*1,l+r*3),a.lineTo(o+s*2,l+r*2),a.moveTo(o+s*3,l+r*4),a.lineTo(o+s*4,l+r*4),a.moveTo(o+s*2,l+r*6),a.lineTo(o+s*2,l+r*8),a.closePath(),a instanceof Path2D)return a}function Na(t){const e=[{x:.5,y:0},{x:1,y:.5},{x:.5,y:1}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function Va(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=c/2,s=i/10;if(a.moveTo(o+r,l),a.lineTo(o+r,l+s),a.moveTo(o+r,l+s),a.quadraticCurveTo(o+r*2,l+s,o+r*2,l+s*9),a.moveTo(o+r,l+s),a.quadraticCurveTo(o,l+s,o,l+s*9),a.quadraticCurveTo(o+r,l+s*6,o+r*2,l+s*9),a.moveTo(o+r,l+i*3/4),a.lineTo(o+r,l+i),a.moveTo(o+r*2/5,l+i*201/250),a.lineTo(o+r*2/5,l+i),a.moveTo(o+r*8/5,l+i*201/250),a.lineTo(o+r*8/5,l+i),a.closePath(),a instanceof Path2D)return a}function Mt(t){const e=[{x:.5,y:0},{x:.2,y:1},{x:.5,y:1},{x:.8,y:1}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function Xa(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/6,s=c/4;if(a.moveTo(o+s*2,l+0),a.lineTo(o+s*2,l+r),a.moveTo(o,l+r+s*2),a.arc(o+s*2,l+r+s*2,s*2,Math.PI*1,Math.PI*2,!1),a.lineTo(o+s*4,l+r*5),a.lineTo(o,l+r*5),a.lineTo(o,l+r+s*2),a.moveTo(o,l+r*5-r/3),a.lineTo(o+s*4,l+r*5-r/3),a.moveTo(o+s,l+r*5),a.lineTo(o+s,l+r*6),a.moveTo(o+s*2,l+r*5),a.lineTo(o+s*2,l+r*6),a.moveTo(o+s*3,l+r*5),a.lineTo(o+s*3,l+r*6),a.closePath(),a instanceof Path2D)return a}function ja(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/4,s=.5*c;if(a.moveTo(o+s,l),a.lineTo(o+s,l+r),a.lineTo(o+s*2,l+r*2),a.lineTo(o+s*2,l+r*4),a.lineTo(o,l+r*4),a.lineTo(o,l+r*2),a.lineTo(o+s,l+r),a.closePath(),a instanceof Path2D)return a}function $a(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/4,s=c/2;if(a.moveTo(o+s,l),a.lineTo(o+s,l+r),a.lineTo(o+s*2,l+r*4),a.lineTo(o,l+r*4),a.lineTo(o+s,l+r),a.closePath(),a instanceof Path2D)return a}function Ua(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect,r=i/3,s=.5*c;if(a.moveTo(o+s,l),a.lineTo(o+s,l+r),a.lineTo(o+c,l+2*r),a.lineTo(o+s,l+i),a.lineTo(o,l+2*r),a.lineTo(o+s,l+r),a.closePath(),a instanceof Path2D)return a}function Ga(t){const e=[{x:.5,y:0},{x:1,y:.6666666666666666},{x:.5,y:1},{x:0,y:.6666666666666666}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function qa(t,e){const a=e||new Path2D,{x:o,y:l,width:c,height:i}=t.calculative.worldRect;let r=c/2,s=i/10;if(a.moveTo(o+r,l),a.lineTo(o+r,l+s),a.moveTo(o+r,l+s),a.quadraticCurveTo(o+r*2,l+s,o+r*2,l+s*9),a.moveTo(o+r,l+s),a.quadraticCurveTo(o,l+s,o,l+s*9),a.quadraticCurveTo(o+r,l+s*6,o+r*2,l+s*9),a.moveTo(o,l+s*10),a.quadraticCurveTo(o+r,l+s*7,o+r*2,l+s*10),a.moveTo(o+r*2/5,l+i*201/250+s),a.lineTo(o+r*2/5,l+i),a.moveTo(o+r*8/5,l+i*201/250+s),a.lineTo(o+r*8/5,l+i),a.closePath(),a instanceof Path2D)return a}function Ja(t){const e=[{x:.5,y:0},{x:.2,y:1},{x:.8,y:1}];t.anchors=e.map(({x:a,y:o},l)=>({id:`${l}`,penId:t.id,x:a,y:o}))}function Za(t,e){const{x:a,y:o,width:l,height:c}=e.calculative.worldRect,i=l/2,r=c/10;t.beginPath(),t.moveTo(a+i,o),t.lineTo(a+i,o+r),t.moveTo(a+i,o+r),t.quadraticCurveTo(a+i*2,o+r,a+i*2,o+r*9),t.moveTo(a+i,o+r),t.quadraticCurveTo(a,o+r,a,o+r*9),t.quadraticCurveTo(a+i,o+r*6,a+i*2,o+r*9),t.moveTo(a+i,o+c*3/4),t.lineTo(a+i,o+c*9/10),t.moveTo(a+i*2/5,o+c*201/250),t.lineTo(a+i*2/5,o+c*9/10),t.moveTo(a+i*8/5,o+c*201/250),t.lineTo(a+i*8/5,o+c*9/10),t.stroke(),t.closePath(),t.beginPath();const s=i*2>r*10?r:i/5;t.fillStyle="#333333",t.font=s+"px Arial",t.textBaseline="bottom",t.textAlign="center",t.fillText("o",a+i,o+c),t.fillText("m",a+i*2/5,o+c),t.fillText("o",a+i*8/5,o+c),t.closePath()}function Qa(){return{andGate:Fa,basicEvent:La,conditionalEvent:Ea,event:xa,forbiddenGate:za,orGate:Va,priorityAndGate:Xa,switchEvent:ja,transferSymbol:$a,unexpandedEvent:Ua,xorGate:qa}}function Ka(){return{votingGate:Za}}function _a(){return{andGate:St,orGate:Mt,priorityAndGate:St,votingGate:Mt,xorGate:Ja,forbiddenGate:Na,basicEvent:Dt,unexpandedEvent:Ga,conditionalEvent:Ya,transferSymbol:Dt}}var pa=(t=>(t[t.File=0]="File",t[t.Pen=1]="Pen",t))(pa||{});const lt=Gt({mode:0,pen:void 0}),tl=()=>({selections:lt,select:e=>{if(!e||e.length!==1){lt.mode=0,lt.pen=void 0;return}lt.mode=1,lt.pen=e[0]}}),el={id:"meta2d"},al=qt({__name:"View",setup(t){const{select:e}=tl(),a={rule:!0,ruleColor:"rgba(255, 255, 255, 0.2)",grid:!0,gridColor:"rgba(255, 255, 255, 0.08)",gridSize:10,color:"#fff",activeColor:"#40C4FF",hoverColor:"#80D8FF",anchorColor:"#fff",anchorRadius:4,anchorBackground:"#001529",background:"#001529",textColor:"#fff",font:{color:"#fff",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'}};Jt(()=>{new jt("meta2d",a),$t(),K(ve()),At(ge()),K(be()),at(Te()),K(De()),K(We()),at(He()),Ve(),at(Pa()),at(Oa()),K(Qa()),at(Ka()),At(_a());let c=localStorage.getItem("meta2d");c&&(c=JSON.parse(c),location.pathname==="/preview"?c.locked=1:c.locked=0,meta2d.open(c)),meta2d.on("active",o),meta2d.on("inactive",l)});const o=c=>{e(c)},l=()=>{e()};return Zt(()=>{meta2d.destroy()}),(c,i)=>(Qt(),Kt("div",el))}});const rl=Ut(al,[["__scopeId","data-v-17a89fdd"]]);export{pa as S,rl as V,tl as u};
//# sourceMappingURL=View-045fae98.js.map
