{"version":3,"file":"Index-b5c12216.js","sources":["../../node_modules/file-saver/dist/FileSaver.min.js","../../src/components/Header.vue","../../src/components/Graphics.vue","../../src/components/FileProps.vue","../../src/components/PenProps.vue","../../src/components/Props.vue","../../src/views/Index.vue"],"sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","<template>\n  <div class=\"app-header\">\n    \n    <t-dropdown\n      :minColumnWidth=\"200\"\n      :maxHeight=\"560\"\n      overlayClassName=\"header-dropdown\"\n    >\n    <span>数字孪生编辑器</span>\n  </t-dropdown>\n    \n    \n    <t-dropdown\n      :minColumnWidth=\"200\"\n      :maxHeight=\"560\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a> 文件 </a>\n      <t-dropdown-menu>\n        <t-dropdown-item @click=\"newFile\">\n          <a>新建文件</a>\n        </t-dropdown-item>\n        <t-dropdown-item @click=\"openFile\" divider=\"true\">\n          <a>打开文件</a>\n        </t-dropdown-item>\n\n        <t-dropdown-item divider=\"true\">\n          <a @click=\"downloadJson\">下载JSON文件</a>\n        </t-dropdown-item>\n\n        <t-dropdown-item>\n          <a @click=\"downloadPng\">下载为PNG</a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"downloadSvg\">下载为SVG</a>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <t-dropdown\n      :minColumnWidth=\"180\"\n      :maxHeight=\"500\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a> 编辑 </a>\n      <t-dropdown-menu>\n        <t-dropdown-item>\n          <a @click=\"onUndo\">\n            <div class=\"flex\">\n              撤销 <span class=\"flex-grow\"></span> Ctrl + Z\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item divider=\"true\">\n          <a @click=\"onRedo\">\n            <div class=\"flex\">\n              恢复 <span class=\"flex-grow\"></span> Ctrl + Y\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onCut\">\n            <div class=\"flex\">\n              剪切 <span class=\"flex-grow\"></span> Ctrl + X\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onCopy\">\n            <div class=\"flex\">\n              复制 <span class=\"flex-grow\"></span> Ctrl + C\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item divider=\"true\">\n          <a @click=\"onPaste\">\n            <div class=\"flex\">\n              粘贴 <span class=\"flex-grow\"></span> Ctrl + V\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onAll\">\n            <div class=\"flex\">\n              全选 <span class=\"flex-grow\"></span> Ctrl + A\n            </div>\n          </a>\n        </t-dropdown-item>\n        <t-dropdown-item>\n          <a @click=\"onDelete\">\n            <div class=\"flex\">删除 <span class=\"flex-grow\"></span> DELETE</div>\n          </a>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n  </div>\n  <div class=\"app-header\">\n    <t-tooltip content=\"撤销\">\n      <svg class=\"l-icon\" aria-hidden=\"true\" @click=\"onUndo\">\n        <use xlink:href=\"#l-undo\"></use>\n      </svg>\n    </t-tooltip>\n    <t-tooltip content=\"重做\">\n      <svg class=\"l-icon\" aria-hidden=\"true\" @click=\"onRedo\">\n        <use xlink:href=\"#l-redo\"></use>\n      </svg>\n    </t-tooltip>\n    \n    <t-tooltip content=\"直线\">\n      <span\n        :draggable=\"true\"\n        @dragstart=\"onAddShape($event, 'line')\"\n        @click=\"onAddShape($event, 'line')\"\n      >\n        <t-icon name=\"slash\" />\n      </span>\n    </t-tooltip>\n    <t-tooltip content=\"文字\">\n      <span\n        :draggable=\"true\"\n        @dragstart=\"onAddShape($event, 'text')\"\n        @click=\"onAddShape($event, 'text')\"\n      >\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use xlink:href=\"#l-text\"></use>\n        </svg>\n      </span>\n    </t-tooltip>\n    <t-tooltip content=\"连线\">\n      <svg\n        width=\"1em\"\n        height=\"1em\"\n        viewBox=\"0 0 1024 1024\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        @click=\"drawLine\"\n        :style=\"{\n          color: isDrawLine ? ' #1677ff' : '',\n        }\"\n      >\n        <path\n          d=\"M192 64a128 128 0 0 1 123.968 96H384a160 160 0 0 1 159.68 149.504L544 320v384a96 96 0 0 0 86.784 95.552L640 800h68.032a128 128 0 1 1 0 64.064L640 864a160 160 0 0 1-159.68-149.504L480 704V320a96 96 0 0 0-86.784-95.552L384 224l-68.032 0.064A128 128 0 1 1 192 64z m640 704a64 64 0 1 0 0 128 64 64 0 0 0 0-128zM192 128a64 64 0 1 0 0 128 64 64 0 0 0 0-128z\"\n          fill=\"currentColor\"\n        ></path>\n      </svg>\n    </t-tooltip>\n    <t-dropdown\n      :minColumnWidth=\"160\"\n      :maxHeight=\"560\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a>\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use\n            :xlink:href=\"\n              lineTypes.find((item: LineType) => item.value === currentLineType)?.icon\n            \"\n          ></use>\n        </svg>\n      </a>\n      <t-dropdown-menu>\n        <t-dropdown-item v-for=\"item in lineTypes\">\n          <div class=\"flex middle\" @click=\"changeLineType(item.value)\">\n            {{ item.name }} <span class=\"flex-grow\"></span>\n            <svg class=\"l-icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"item.icon\"></use>\n            </svg>\n          </div>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <t-dropdown\n      :minColumnWidth=\"160\"\n      :maxHeight=\"560\"\n      :delay2=\"[10, 150]\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a>\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use\n            :xlink:href=\"\n              fromArrows.find((item: Arrow) => item.value === fromArrow)?.icon\n            \"\n          ></use>\n        </svg>\n      </a>\n      <t-dropdown-menu>\n        <t-dropdown-item v-for=\"item in fromArrows\">\n          <div\n            class=\"flex middle\"\n            style=\"height: 30px\"\n            @click=\"changeFromArrow(item.value)\"\n          >\n            <svg class=\"l-icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"item.icon\"></use>\n            </svg>\n          </div>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <t-dropdown\n      :minColumnWidth=\"160\"\n      :maxHeight=\"560\"\n      :delay2=\"[10, 150]\"\n      overlayClassName=\"header-dropdown\"\n    >\n      <a>\n        <svg class=\"l-icon\" aria-hidden=\"true\">\n          <use\n            :xlink:href=\"toArrows.find((item: Arrow) => item.value === toArrow)?.icon\"\n          ></use>\n        </svg>\n      </a>\n      <t-dropdown-menu>\n        <t-dropdown-item v-for=\"item in toArrows\">\n          <div\n            class=\"flex middle\"\n            style=\"height: 30px\"\n            @click=\"changeToArrow(item.value)\"\n          >\n            <svg class=\"l-icon\" aria-hidden=\"true\">\n              <use :xlink:href=\"item.icon\"></use>\n            </svg>\n          </div>\n        </t-dropdown-item>\n      </t-dropdown-menu>\n    </t-dropdown>\n    <div style=\"width: 64px\"></div>\n    <div v-show=\"scale > 0\" style=\"line-height: 40px\">{{ scale }}%</div>\n    <t-tooltip content=\"100%视图\" placement=\"bottom\">\n      <a @click=\"onScaleDefault\"><t-icon name=\"refresh\" /></a>\n    </t-tooltip>\n    <t-tooltip content=\"窗口大小\" placement=\"bottom\">\n      <a @click=\"onScaleWindow\" style=\"margin-left: -16px\"\n        ><t-icon name=\"fullscreen-exit\"\n      /></a>\n    </t-tooltip>\n    <div style=\"width: 36px\"></div>\n    <t-tooltip content=\"运行查看\">\n      <t-icon name=\"play-circle-stroke\" @click=\"onView\" />\n    </t-tooltip>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { onMounted, reactive, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { Pen, PenType, deepClone } from '@meta2d/core';\n// @ts-ignore\nimport FileSaver from 'file-saver';\nimport { MessagePlugin } from 'tdesign-vue-next';\n\nconst router = useRouter();\n\nconst isDrawLine = ref<boolean>(false);\n\nconst scale = ref(0);\n\nonMounted(() => {\n  const timer = setInterval(() => {\n    if (meta2d) {\n      clearInterval(timer);\n      // 获取初始缩放比例\n      scaleSubscriber(meta2d.store.data.scale);\n\n      // 监听缩放\n      // @ts-ignore\n      meta2d.on('scale', scaleSubscriber);\n    }\n  }, 200);\n});\n\nconst scaleSubscriber = (val: number) => {\n  scale.value = Math.round(val * 100);\n};\n\nconst drawLine = () => {\n  if (isDrawLine.value) {\n    isDrawLine.value = false;\n    meta2d.finishDrawLine();\n    meta2d.drawLine();\n    meta2d.store.options.disableAnchor = true;\n  } else {\n    isDrawLine.value = true;\n    meta2d.drawLine(meta2d.store.options.drawingLineName);\n    meta2d.store.options.disableAnchor = false;\n  }\n};\n\nconst lineTypes = reactive([\n  { name: '曲线', icon: '#l-curve2', value: 'curve' },\n  { name: '线段', icon: '#l-polyline', value: 'polyline' },\n  { name: '直线', icon: '#l-line', value: 'line' },\n  { name: '脑图曲线', icon: '#l-mind', value: 'mind' },\n] as const);\n\ninterface LineType {\n  name: string;\n  icon: string;\n  value: string;\n}\n\ninterface Arrow {\n  icon: string;\n  value: string;\n}\n\nconst currentLineType = ref('curve');\n\nconst changeLineType = (value: string) => {\n  currentLineType.value = value;\n  if (meta2d) {\n    meta2d.store.options.drawingLineName = value;\n    meta2d.canvas.drawingLineName && (meta2d.canvas.drawingLineName = value);\n    meta2d.store.active?.forEach((pen) => {\n      meta2d.updateLineType(pen, value);\n    });\n  }\n};\n\nconst fromArrow = ref('');\nconst fromArrows: Arrow[] = [\n  { icon: '#l-line', value: '' },\n  { icon: '#l-from-triangle', value: 'triangle' },\n  { icon: '#l-from-diamond', value: 'diamond' },\n  { icon: '#l-from-circle', value: 'circle' },\n  { icon: '#l-from-lineDown', value: 'lineDown' },\n  { icon: '#l-from-lineUp', value: 'lineUp' },\n  { icon: '#l-from-triangleSolid', value: 'triangleSolid' },\n  { icon: '#l-from-diamondSolid', value: 'diamondSolid' },\n  { icon: '#l-from-circleSolid', value: 'circleSolid' },\n  { icon: '#l-from-line', value: 'line' },\n];\nconst toArrow = ref('');\nconst toArrows: Arrow[] = [\n  { icon: '#l-line', value: '' },\n  { icon: '#l-to-triangle', value: 'triangle' },\n  { icon: '#l-to-diamond', value: 'diamond' },\n  { icon: '#l-to-circle', value: 'circle' },\n  { icon: '#l-to-lineDown', value: 'lineDown' },\n  { icon: '#l-to-lineUp', value: 'lineUp' },\n  { icon: '#l-to-triangleSolid', value: 'triangleSolid' },\n  { icon: '#l-to-diamondSolid', value: 'diamondSolid' },\n  { icon: '#l-to-circleSolid', value: 'circleSolid' },\n  { icon: '#l-to-line', value: 'line' },\n];\n\nconst changeFromArrow = (value: string) => {\n  fromArrow.value = value;\n  // 画布默认值\n  meta2d.store.data.fromArrow = value;\n  // 活动层的箭头都变化\n  if (meta2d.store.active) {\n    meta2d.store.active.forEach((pen: Pen) => {\n      if (pen.type === PenType.Line) {\n        pen.fromArrow = value;\n        meta2d.setValue(\n          {\n            id: pen.id,\n            fromArrow: pen.fromArrow,\n          },\n          {\n            render: false,\n          }\n        );\n      }\n    });\n    meta2d.render();\n  }\n};\n\nconst changeToArrow = (value: string) => {\n  toArrow.value = value;\n  // 画布默认值\n  meta2d.store.data.toArrow = value;\n  // 活动层的箭头都变化\n  if (meta2d.store.active) {\n    meta2d.store.active.forEach((pen: Pen) => {\n      if (pen.type === PenType.Line) {\n        pen.toArrow = value;\n        meta2d.setValue(\n          {\n            id: pen.id,\n            toArrow: pen.toArrow,\n          },\n          {\n            render: false,\n          }\n        );\n      }\n    });\n    meta2d.render();\n  }\n};\n\nconst newFile = () => {\n  meta2d.open({ name: '新建项目', pens: [] } as any);\n};\n\nfunction readFile(file: Blob) {\n  return new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      resolve(reader.result as string);\n    };\n    reader.onerror = reject;\n    reader.readAsText(file);\n  });\n}\n\nconst openFile = () => {\n  // 1. 显示选择文件对话框\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.onchange = async (event) => {\n    const elem = event.target as HTMLInputElement;\n    if (elem.files && elem.files[0]) {\n      // 2. 读取文件字符串内容\n      const text = await readFile(elem.files[0]);\n      try {\n        // 3. 打开文件内容\n        meta2d.open(JSON.parse(text));\n\n        // 可选：缩放到窗口大小展示\n        meta2d.fitView();\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  };\n  input.click();\n};\n\nconst downloadJson = () => {\n  const data: any = meta2d.data();\n  FileSaver.saveAs(\n    new Blob([JSON.stringify(data)], {\n      type: 'text/plain;charset=utf-8',\n    }),\n    `${data.name || 'le5le.meta2d'}.json`\n  );\n};\n\nconst downloadPng = () => {\n  let name = (meta2d.store.data as any).name;\n  if (name) {\n    name += '.png';\n  }\n  meta2d.downloadPng(name);\n};\n\n// 判断该画笔 是否是组合为状态中 展示的画笔\nfunction isShowChild(pen: any, store: any) {\n  let selfPen = pen;\n  while (selfPen && selfPen.parentId) {\n    const oldPen = selfPen;\n    selfPen = store.pens[selfPen.parentId];\n    const showChildIndex = selfPen?.calculative?.showChild;\n    if (showChildIndex != undefined) {\n      const showChildId = selfPen.children[showChildIndex];\n      if (showChildId !== oldPen.id) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nconst downloadSvg = () => {\n  if (!C2S) {\n    MessagePlugin.error('请先加载乐吾乐官网下的canvas2svg.js');\n    return;\n  }\n\n  const rect: any = meta2d.getRect();\n  rect.x -= 10;\n  rect.y -= 10;\n  const ctx = new C2S(rect.width + 20, rect.height + 20);\n  ctx.textBaseline = 'middle';\n  for (const pen of meta2d.store.data.pens) {\n    if (pen.visible == false || !isShowChild(pen, meta2d.store)) {\n      continue;\n    }\n    meta2d.renderPenRaw(ctx, pen, rect);\n  }\n\n  let mySerializedSVG = ctx.getSerializedSvg();\n  if (meta2d.store.data.background) {\n    mySerializedSVG = mySerializedSVG.replace('{{bk}}', '');\n    mySerializedSVG = mySerializedSVG.replace(\n      '{{bkRect}}',\n      `<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"${meta2d.store.data.background}\"></rect>`\n    );\n  } else {\n    mySerializedSVG = mySerializedSVG.replace('{{bk}}', '');\n    mySerializedSVG = mySerializedSVG.replace('{{bkRect}}', '');\n  }\n\n  mySerializedSVG = mySerializedSVG.replace(/--le5le--/g, '&#x');\n\n  const urlObject: any = (window as any).URL || window;\n  const export_blob = new Blob([mySerializedSVG]);\n  const url = urlObject.createObjectURL(export_blob);\n\n  const a = document.createElement('a');\n  a.setAttribute(\n    'download',\n    `${(meta2d.store.data as any).name || 'le5le.meta2d'}.svg`\n  );\n  a.setAttribute('href', url);\n  const evt = document.createEvent('MouseEvents');\n  evt.initEvent('click', true, true);\n  a.dispatchEvent(evt);\n};\n\nconst onUndo = () => {\n  meta2d.undo();\n};\n\nconst onRedo = () => {\n  meta2d.redo();\n};\n\nconst onCut = () => {\n  meta2d.cut();\n};\n\nconst onCopy = () => {\n  meta2d.copy();\n};\n\nconst onPaste = () => {\n  meta2d.paste();\n};\n\nconst onAll = () => {\n  meta2d.activeAll();\n};\n\nconst onDelete = () => {\n  meta2d.delete();\n};\n\nconst onAddShape = (event: DragEvent | MouseEvent, name: string) => {\n  event.stopPropagation();\n  let data: any;\n  if (name === 'text') {\n    // 构建一个文本图元\n    data = {\n      text: 'text',\n      width: 100,\n      height: 20,\n      name: 'text',\n    };\n  } else if (name === 'line') {\n    // 构建一个直线图元\n    data = {\n      anchors: [\n        { id: '0', x: 1, y: 0 },\n        { id: '1', x: 0, y: 1 },\n      ],\n      width: 100,\n      height: 100,\n      name: 'line',\n      lineName: 'line',\n      type: 1,\n    };\n  }\n  if (!(event as DragEvent).dataTransfer) {\n    // 支持点击画布添加\n    meta2d.canvas.addCaches = deepClone([data]);\n  } else {\n    // 支持拖拽添加\n    (event as DragEvent).dataTransfer?.setData('Meta2d', JSON.stringify(data));\n  }\n};\n\nconst onScaleDefault = () => {\n  meta2d.scale(1);\n  meta2d.centerView();\n};\n\nconst onScaleWindow = () => {\n  meta2d.fitView();\n};\n\nconst onView = () => {\n  // 先停止动画，避免数据波动\n  meta2d.stopAnimate();\n  // 本地存储\n  const data: any = meta2d.data();\n  localStorage.setItem('meta2d', JSON.stringify(data));\n  // 跳转到预览页面\n  router.push({\n    path: '/preview',\n    query: {\n      r: Date.now() + '',\n      id: data._id,\n    },\n  });\n};\n</script>\n<style lang=\"postcss\" scoped>\n.app-header {\n  display: flex;\n  height: 40px;\n  padding: 0 12px;\n  position: relative;\n  border-bottom: 1px solid rgba(0, 176, 255, 0.2);\n  z-index: 2;\n  background-color: #001529;\n\n  .logo {\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n    font-weight: 500;\n    padding-left: 0;\n    color: #00B0FF;\n\n    img {\n      height: 20px;\n      margin-right: 6px;\n    }\n  }\n\n  a {\n    display: flex;\n    padding: 0 8px;\n    margin: 0 8px;\n    align-items: center;\n    color: #00B0FF;\n    text-decoration: none;\n    white-space: nowrap;\n    transition: all 0.3s ease;\n\n    &:hover {\n      color: #40C4FF;\n      text-shadow: 0 0 8px rgba(0, 176, 255, 0.5);\n    }\n\n    svg {\n      font-size: 15px;\n      margin: 2px 4px 0 0;\n    }\n\n    &.active {\n      background-color: rgba(0, 176, 255, 0.15);\n      color: #40C4FF;\n    }\n  }\n\n  svg {\n    height: 40px;\n    margin: 0 8px;\n    color: #00B0FF;\n    transition: all 0.3s ease;\n    \n    &:hover {\n      color: #40C4FF;\n      cursor: pointer;\n      filter: drop-shadow(0 0 4px rgba(0, 176, 255, 0.5));\n    }\n  }\n}\n</style>\n\n<style>\n.t-dropdown__item-text {\n  a {\n    color: #00B0FF;\n    text-decoration: none;\n    white-space: nowrap;\n    transition: all 0.3s ease;\n\n    &:hover {\n      color: #40C4FF;\n      text-shadow: 0 0 8px rgba(0, 176, 255, 0.5);\n    }\n  }\n}\n\n.header-dropdown {\n  background-color: #001529 !important;\n  border: 1px solid rgba(0, 176, 255, 0.2) !important;\n  box-shadow: 0 0 20px rgba(0, 176, 255, 0.1) !important;\n}\n\n.t-dropdown__item {\n  background-color: transparent !important;\n  transition: all 0.3s ease !important;\n\n  &:hover {\n    background-color: rgba(0, 176, 255, 0.1) !important;\n  }\n}\n\n.t-dropdown__item--divided::after {\n  border-color: rgba(0, 176, 255, 0.2) !important;\n}\n\n.t-tooltip {\n  background-color: #001529 !important;\n  border: 1px solid rgba(0, 176, 255, 0.2) !important;\n  color: #00B0FF !important;\n    }\n\n.flex-grow {\n  flex-grow: 1;\n}\n\n.flex {\n  display: flex;\n  align-items: center;\n}\n</style>\n","<template>\n  <div class=\"graphics\">\n    <t-collapse :defaultExpandAll=\"true\">\n      <t-collapse-panel\n        :header=\"item.name\"\n        v-for=\"item in graphicGroups\"\n        :key=\"item.name\"\n      >\n        <template v-for=\"elem in item.list\">\n          <div\n            class=\"graphic\"\n            :draggable=\"true\"\n            @dragstart=\"dragStart($event, elem)\"\n            @click.prevent=\"dragStart($event, elem)\"\n          >\n            <template v-if=\"elem.data.image\">\n              <img :src=\"elem.data.image\" :alt=\"elem.name\" class=\"l-icon\" />\n            </template>\n            <template v-else>\n              <div :class=\"[elem.icon, 'l-icon']\"></div>\n            </template>\n            <p :title=\"elem.name\">{{ elem.name }}</p>\n          </div>\n        </template>\n      </t-collapse-panel>\n    </t-collapse>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { TextAlign, TextBaseline } from '@meta2d/core';\n\ninterface PenData {\n  width: number;\n  height: number;\n  name: string;\n  text?: string;\n  image?: string;\n  textPosition?: string;\n  textColor?: string;\n  borderRadius?: number;\n  textTop?: number;\n  z?: number;\n  offsetX?: number;\n  background?: string;\n  textBaseline?: TextBaseline;\n  textWidth?: number;\n  textHeight?: number;\n  textAlign?: TextAlign;\n  textLeft?: number;\n  lineTop?: number;\n  lineLeft?: number;\n  fillStyle?: string;\n  strokeStyle?: string;\n  lineWidth?: number;\n  color?: string;\n  list?: Array<{\n    text: string;\n  }>;\n  props?: {\n    custom: Array<{\n      key: string;\n      label: string;\n      type: string;\n      min?: number;\n      placeholder?: string;\n    }>;\n  };\n}\n\ninterface GraphicItem {\n  name: string;\n  icon: string;\n  id?: string | number;\n  data: PenData;\n}\n\ninterface GraphicGroup {\n  name: string;\n  show: boolean;\n  list: GraphicItem[];\n}\n\nconst graphicGroups: GraphicGroup[] = [\n  {\n    name: '设备',\n    show: true,\n    list: [\n      {\n        name: '分集水器',\n        icon: 'l-device-separator',\n        id: 'device_1',\n        data: {\n          width: 100,\n          height: 40,\n          name: 'image',\n          text: '分集水器',\n          image: '/devices/separator.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '加药泵',\n        icon: 'l-device-pump',\n        id: 'device_2',\n        data: {\n          width: 40,\n          height: 80,\n          name: 'image',\n          text: '加药泵',\n          image: '/devices/pump.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '加药箱',\n        icon: 'l-device-tank',\n        id: 'device_3',\n        data: {\n          width: 60,\n          height: 100,\n          name: 'image',\n          text: '加药箱',\n          image: '/devices/tank.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '加药箱2',\n        icon: 'l-device-tank2',\n        id: 'device_4',\n        data: {\n          width: 60,\n          height: 100,\n          name: 'image',\n          text: '加药箱2',\n          image: '/devices/tank2.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '压力表',\n        icon: 'l-device-gauge',\n        id: 'device_5',\n        data: {\n          width: 60,\n          height: 60,\n          name: 'image',\n          text: '压力表',\n          image: '/devices/gauge.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '压滤机',\n        icon: 'l-device-filter',\n        id: 'device_6',\n        data: {\n          width: 120,\n          height: 40,\n          name: 'image',\n          text: '压滤机',\n          image: '/devices/filter.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '回流泵',\n        icon: 'l-device-pump2',\n        id: 'device_7',\n        data: {\n          width: 80,\n          height: 40,\n          name: 'image',\n          text: '回流泵',\n          image: '/devices/pump2.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '废水池',\n        icon: 'l-device-pool',\n        id: 'device_8',\n        data: {\n          width: 120,\n          height: 120,\n          name: 'image',\n          text: '废水池',\n          image: '/devices/pool.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '排水泵',\n        icon: 'l-device-drain',\n        id: 'device_9',\n        data: {\n          width: 80,\n          height: 40,\n          name: 'image',\n          text: '排水泵',\n          image: '/devices/drain.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '污泥收集',\n        icon: 'l-device-sludge',\n        id: 'device_10',\n        data: {\n          width: 120,\n          height: 120,\n          name: 'image',\n          text: '污泥收集',\n          image: '/devices/sludge.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '污泥泵',\n        icon: 'l-device-sludge-pump',\n        id: 'device_11',\n        data: {\n          width: 40,\n          height: 100,\n          name: 'image',\n          text: '污泥泵',\n          image: '/devices/sludge-pump.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n      {\n        name: '沉淀池',\n        icon: 'l-device-settling',\n        id: 'device_12',\n        data: {\n          width: 150,\n          height: 150,\n          name: 'image',\n          text: '沉淀池',\n          image: '/devices/settling.svg',\n          textPosition: 'bottom',\n          textColor: '#fff',\n        },\n      },\n    ],\n  },\n  {\n    name: '基本形状',\n    show: true,\n    list: [\n      {\n        name: '正方形',\n        icon: 'l-rect',\n        id: 1,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'rectangle',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '矩形',\n        icon: 'l-rectangle',\n        id: 2,\n        data: {\n          width: 200,\n          height: 50,\n          name: 'rectangle',\n          borderRadius: 0.1,\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '圆',\n        icon: 'l-circle',\n        id: 3,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'circle',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '三角形',\n        icon: 'l-triangle',\n        id: 4,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'triangle',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '菱形',\n        icon: 'l-diamond',\n        id: 5,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'diamond',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '五边形',\n        icon: 'l-pentagon',\n        id: 6,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'pentagon',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '六边形',\n        icon: 'l-hexagon',\n        id: 7,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'hexagon',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '五角星',\n        icon: 'l-pentagram',\n        id: 8,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'pentagram',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '左箭头',\n        icon: 'l-arrow-left',\n        id: 9,\n        data: {\n          width: 120,\n          height: 60,\n          name: 'leftArrow',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '右箭头',\n        icon: 'l-arrow-right',\n        id: 10,\n        data: {\n          width: 120,\n          height: 60,\n          name: 'rightArrow',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '双向箭头',\n        icon: 'l-twoway-arrow',\n        id: 11,\n        data: {\n          width: 150,\n          height: 60,\n          name: 'twowayArrow',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '云',\n        icon: 'l-cloud',\n        id: 13,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'cloud',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '消息框',\n        icon: 'l-msg',\n        id: 14,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'message',\n          textTop: -0.1,\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '文件',\n        icon: 'l-file',\n        id: 15,\n        data: {\n          width: 80,\n          height: 100,\n          name: 'file',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '立方体',\n        icon: 'l-cube',\n        id: 18,\n        data: {\n          width: 100,\n          height: 100,\n          name: 'cube',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n      {\n        name: '人',\n        icon: 'l-people',\n        id: 19,\n        data: {\n          width: 70,\n          height: 100,\n          name: 'people',\n          strokeStyle: 'rgb(0, 31, 151)'\n        },\n      },\n    ],\n  },\n];\n\nconst dragStart = (e: any, elem: GraphicItem) => {\n  if (!elem) {\n    return;\n  }\n  e.stopPropagation();\n\n  // 拖拽事件\n  if (e instanceof DragEvent) {\n    // 设置拖拽数据\n    e.dataTransfer?.setData('Meta2d', JSON.stringify(elem.data));\n  } else {\n    // 支持单击添加图元。平板模式\n    meta2d.canvas.addCaches = [elem.data];\n  }\n};\n</script>\n<style lang=\"postcss\" scoped>\n.graphics {\n  height: 100%;\n  overflow-y: auto;\n  background-color: #001529;\n  border-right: 1px solid rgba(255, 255, 255, 0.1);\n\n  :deep(.t-collapse) {\n    border: none;\n    background-color: transparent;\n\n    .t-collapse-panel {\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n      background-color: transparent;\n\n      &__header {\n        height: 48px;\n        color: #fff;\n        font-size: 14px;\n        background-color: rgba(255, 255, 255, 0.03);\n        transition: all 0.3s ease;\n\n      &:hover {\n          background-color: rgba(255, 255, 255, 0.08);\n        }\n\n        .t-collapse-panel__header-right {\n          color: #fff;\n        }\n      }\n\n      &__content {\n        background-color: rgba(0, 24, 48, 0.8) !important;\n        padding: 16px;\n        display: grid;\n        grid-template-columns: repeat(3, 1fr);\n        gap: 12px;\n      }\n    }\n  }\n}\n\n.graphic {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  padding: 8px;\n  cursor: move;\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 4px;\n  background-color: rgba(255, 255, 255, 0.02);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.08);\n    box-shadow: 0 0 8px rgba(64, 196, 255, 0.2);\n    transform: translateY(-1px);\n  }\n\n  .l-icon {\n    width: 24px;\n    height: 24px;\n    color: rgb(0, 31, 151);\n    display: inline-block;\n  }\n\n  img.l-icon {\n    object-fit: contain;\n  }\n\n  div.l-icon {\n    background-color: currentColor;\n  }\n\n  p {\n    margin: 0;\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.9);\n    text-align: center;\n    width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n\n::-webkit-scrollbar-track {\n  background: #001529;\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n</style>\n","<template>\r\n  <div class=\"props-panel\">\r\n    <t-form label-align=\"left\">\r\n      <h5 class=\"mb-24\">图纸</h5>\r\n      <t-form-item label=\"图纸名称\" name=\"name\">\r\n        <t-input v-model=\"data.name\" @change=\"onChangeData\" />\r\n      </t-form-item>\r\n      <t-divider />\r\n      <t-form-item label=\"网格\" name=\"grid\">\r\n        <t-switch v-model=\"options.grid\" @change=\"onChangeOptions\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"网格大小\" name=\"gridSize\">\r\n        <t-input v-model.number=\"options.gridSize\" @change=\"onChangeOptions\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"网格角度\" name=\"gridRotate\">\r\n        <t-input\r\n          v-model.number=\"options.gridRotate\"\r\n          @change=\"onChangeOptions\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"网格颜色\" name=\"gridColor\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"options.gridColor\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"onChangeOptions\"\r\n        />\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"标尺\" name=\"rule\">\r\n        <t-switch v-model=\"options.rule\" @change=\"onChangeOptions\" />\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"背景颜色\" name=\"background\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"data.background\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"onChangeData\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"图元默认颜色\" name=\"color\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"data.color\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"onChangeData\"\r\n        />\r\n      </t-form-item>\r\n    </t-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { onMounted, reactive } from 'vue';\r\n\r\n// 图纸数据\r\nconst data = reactive<any>({\r\n  name: '',\r\n  background: undefined,\r\n  color: undefined,\r\n});\r\n\r\n// 画布选项\r\nconst options = reactive<any>({\r\n  grid: false,\r\n  gridSize: 10,\r\n  gridRotate: undefined,\r\n  gridColor: undefined,\r\n  rule: true,\r\n});\r\n\r\nonMounted(() => {\r\n  const d: any = meta2d.data();\r\n  data.name = d.name || '';\r\n  data.background = d.background;\r\n  data.color = d.color;\r\n\r\n  Object.assign(options, meta2d.getOptions());\r\n});\r\n\r\nconst onChangeData = () => {\r\n  Object.assign(meta2d.store.data, data);\r\n  meta2d.store.patchFlagsBackground = true;\r\n  meta2d.render();\r\n};\r\n\r\nconst onChangeOptions = () => {\r\n  meta2d.setOptions(options);\r\n  meta2d.store.patchFlagsTop = true;\r\n  meta2d.store.patchFlagsBackground = true;\r\n  meta2d.render();\r\n};\r\n</script>\r\n<style lang=\"postcss\" scoped>\r\n.props-panel {\r\n  :deep(.t-form) {\r\n    .t-form__item {\r\n      margin-bottom: 8px;\r\n    }\r\n    .t-form__label {\r\n      padding-right: 8px;\r\n    }\r\n\r\n    .t-divider {\r\n      margin: 12px 0;\r\n    }\r\n\r\n    .t-input--auto-width {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"props-panel\">\r\n    <t-form label-align=\"left\" v-if=\"pen\">\r\n      <h5 class=\"mb-24\">图元</h5>\r\n      <t-form-item label=\"文本\" name=\"text\">\r\n        <t-input v-model=\"pen.text\" @change=\"changeValue('text')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"颜色\" name=\"color\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"pen.color\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"changeValue('color')\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"背景\" name=\"background\">\r\n        <t-color-picker\r\n          class=\"w-full\"\r\n          v-model=\"pen.background\"\r\n          :show-primary-color-preview=\"false\"\r\n          format=\"CSS\"\r\n          :color-modes=\"['monochrome']\"\r\n          @change=\"changeValue('background')\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"线条\" name=\"dash\">\r\n        <t-select v-model=\"pen.dash\" @change=\"changeValue('dash')\">\r\n          <t-option :key=\"0\" :value=\"0\" label=\"实线\"></t-option>\r\n          <t-option :key=\"1\" :value=\"1\" label=\"虚线\"></t-option>\r\n        </t-select>\r\n      </t-form-item>\r\n      <t-form-item label=\"圆角\" name=\"borderRadius\">\r\n        <t-input-number\r\n          :min=\"0\"\r\n          :max=\"1\"\r\n          :step=\"0.01\"\r\n          v-model=\"pen.borderRadius\"\r\n          @change=\"changeValue('borderRadius')\"\r\n        />\r\n      </t-form-item>\r\n      <t-form-item label=\"不透明度\" name=\"globalAlpha\">\r\n        <t-slider\r\n          v-model=\"pen.globalAlpha\"\r\n          :min=\"0\"\r\n          :max=\"1\"\r\n          :step=\"0.01\"\r\n          @change=\"changeValue('globalAlpha')\"\r\n        />\r\n        <span class=\"ml-16\" style=\"width: 50px; line-height: 30px\">\r\n          {{ pen.globalAlpha }}\r\n        </span>\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"X\" name=\"x\">\r\n        <t-input-number v-model=\"rect.x\" @change=\"changeRect('x')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"Y\" name=\"y\">\r\n        <t-input-number v-model=\"rect.y\" @change=\"changeRect('y')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"宽\" name=\"width\">\r\n        <t-input-number v-model=\"rect.width\" @change=\"changeRect('width')\" />\r\n      </t-form-item>\r\n      <t-form-item label=\"高\" name=\"height\">\r\n        <t-input-number v-model=\"rect.height\" @change=\"changeRect('height')\" />\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-form-item label=\"文字水平对齐\" name=\"textAlign\">\r\n        <t-select v-model=\"pen.textAlign\" @change=\"changeValue('textAlign')\">\r\n          <t-option key=\"left\" value=\"left\" label=\"左对齐\"></t-option>\r\n          <t-option key=\"center\" value=\"center\" label=\"居中\"></t-option>\r\n          <t-option key=\"right\" value=\"right\" label=\"右对齐\"></t-option>\r\n        </t-select>\r\n      </t-form-item>\r\n      <t-form-item label=\"文字垂直对齐\" name=\"textBaseline\">\r\n        <t-select\r\n          v-model=\"pen.textBaseline\"\r\n          @change=\"changeValue('textBaseline')\"\r\n        >\r\n          <t-option key=\"top\" value=\"top\" label=\"顶部对齐\"></t-option>\r\n          <t-option key=\"middle\" value=\"middle\" label=\"居中\"></t-option>\r\n          <t-option key=\"bottom\" value=\"bottom\" label=\"底部对齐\"></t-option>\r\n        </t-select>\r\n      </t-form-item>\r\n\r\n      <t-divider />\r\n\r\n      <t-space>\r\n        <t-button @click=\"top\">置顶</t-button>\r\n        <t-button @click=\"bottom\">置底</t-button>\r\n        <t-button @click=\"up\">上一层</t-button>\r\n        <t-button @click=\"down\">下一层</t-button>\r\n      </t-space>\r\n    </t-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { onMounted, onUnmounted, ref, watch } from 'vue';\r\nimport { useSelection } from '@/services/selections';\r\n\r\nconst { selections } = useSelection();\r\n\r\nconst pen = ref<any>();\r\n// 位置数据。当前版本位置需要动态计算获取\r\nconst rect = ref<any>();\r\n\r\nonMounted(() => {\r\n  getPen();\r\n});\r\n\r\nconst getPen = () => {\r\n  pen.value = selections.pen;\r\n  if (pen.value.globalAlpha == undefined) {\r\n    pen.value.globalAlpha = 1;\r\n  }\r\n\r\n  rect.value = meta2d.getPenRect(pen.value);\r\n};\r\n\r\n// 监听选中不同图元\r\n// @ts-ignore\r\nconst watcher = watch(() => selections.pen.id, getPen);\r\n\r\nconst lineDashs = [undefined, [5, 5]];\r\n\r\nconst changeValue = (prop: string) => {\r\n  const v: any = { id: pen.value.id };\r\n  v[prop] = pen.value[prop];\r\n  if (prop === 'dash') {\r\n    v.lineDash = lineDashs[v[prop]];\r\n  }\r\n  meta2d.setValue(v, { render: true });\r\n};\r\n\r\nconst changeRect = (prop: string) => {\r\n  const v: any = { id: pen.value.id };\r\n  v[prop] = rect.value[prop];\r\n  meta2d.setValue(v, { render: true });\r\n};\r\n\r\nconst top = () => {\r\n  meta2d.top();\r\n  meta2d.render();\r\n};\r\nconst bottom = () => {\r\n  meta2d.bottom();\r\n  meta2d.render();\r\n};\r\nconst up = () => {\r\n  meta2d.up();\r\n  meta2d.render();\r\n};\r\nconst down = () => {\r\n  meta2d.down();\r\n  meta2d.render();\r\n};\r\n\r\nonUnmounted(() => {\r\n  watcher();\r\n});\r\n</script>\r\n<style lang=\"postcss\" scoped>\r\n.props-panel {\r\n  :deep(.t-form) {\r\n    .t-form__item {\r\n      margin-bottom: 8px;\r\n    }\r\n    .t-form__label {\r\n      padding-right: 8px;\r\n    }\r\n\r\n    .t-divider {\r\n      margin: 12px 0;\r\n    }\r\n\r\n    .t-input--auto-width {\r\n      width: 100%;\r\n    }\r\n\r\n    .t-space {\r\n      gap: 4px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"app-props\">\r\n    <FileProps v-if=\"selections.mode === SelectionMode.File\" />\r\n    <PenProps v-else-if=\"selections.mode === SelectionMode.Pen\" />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport FileProps from './FileProps.vue';\r\nimport PenProps from './PenProps.vue';\r\n\r\nimport { useSelection, SelectionMode } from '@/services/selections';\r\n\r\nconst { selections } = useSelection();\r\n</script>\r\n<style lang=\"postcss\" scoped>\r\n.app-props {\r\n  padding: 16px;\r\n  background-color: #001529;\r\n  border-left: 1px solid rgba(255, 255, 255, 0.1);\r\n  height: 100%;\r\n  overflow-y: auto;\r\n\r\n  :deep(.t-form__label) {\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n  }\r\n\r\n  :deep(.t-input),\r\n  :deep(.t-textarea),\r\n  :deep(.t-select) {\r\n    background-color: rgba(0, 24, 48, 0.8) !important;\r\n    border-color: rgba(255, 255, 255, 0.15) !important;\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n\r\n    &::placeholder {\r\n      color: rgba(255, 255, 255, 0.4) !important;\r\n    }\r\n\r\n    &:hover,\r\n    &:focus {\r\n      border-color: rgba(64, 196, 255, 0.5) !important;\r\n      box-shadow: 0 0 8px rgba(64, 196, 255, 0.2) !important;\r\n    }\r\n  }\r\n\r\n  :deep(.t-input__inner) {\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n  }\r\n\r\n  :deep(.t-select-option) {\r\n    background-color: rgba(0, 24, 48, 0.95) !important;\r\n    color: rgba(255, 255, 255, 0.9) !important;\r\n\r\n    &:hover,\r\n    &.t-select-option--selected {\r\n      background-color: rgba(255, 255, 255, 0.1) !important;\r\n    }\r\n  }\r\n\r\n  :deep(.t-select__dropdown) {\r\n    background-color: #001529 !important;\r\n    border: 1px solid rgba(255, 255, 255, 0.15) !important;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;\r\n  }\r\n}\r\n\r\n::-webkit-scrollbar {\r\n  width: 4px;\r\n  height: 4px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n  background: #001529;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n}\r\n</style>\r\n","<template>\n  <div class=\"app-page\">\n    <Header />\n\n    <div class=\"designer\">\n      <Graphics />\n      <View />\n      <Props />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { onMounted } from 'vue';\n\nimport Header from '../components/Header.vue';\nimport Graphics from '../components/Graphics.vue';\nimport View from '../components/View.vue';\nimport Props from '../components/Props.vue';\n\nlet timer: any;\nfunction save() {\n  if (timer) {\n    clearTimeout(timer);\n  }\n  timer = setTimeout(() => {\n    const data: any = meta2d.data();\n    localStorage.setItem('meta2d', JSON.stringify(data));\n    timer = undefined;\n  }, 1000);\n}\n\nonMounted(() => {\n  meta2d.on('scale', save);\n  meta2d.on('add', save);\n  meta2d.on('opened', save);\n  meta2d.on('undo', save);\n  meta2d.on('redo', save);\n  meta2d.on('add', save);\n  meta2d.on('delete', save);\n  meta2d.on('rotatePens', save);\n  meta2d.on('translatePens', save);\n});\n</script>\n\n<style lang=\"postcss\" scoped>\n.app-page {\n  height: 100vh;\n  overflow: hidden;\n\n  .designer {\n    display: grid;\n    grid-template-columns: 300px 1fr 301px;\n    height: calc(100vh - 80px);\n  }\n}\n</style>\n"],"names":["b","a","autoBom","test","type","Blob","c","d","XMLHttpRequest","open","responseType","onload","response","onerror","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","g","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","router","useRouter","isDrawLine","ref","scale","onMounted","timer","setInterval","meta2d","clearInterval","scaleSubscriber","store","data","on","val","value","Math","round","drawLine","finishDrawLine","options","disableAnchor","drawingLineName","lineTypes","reactive","icon","currentLineType","fromArrow","fromArrows","toArrow","toArrows","newFile","pens","openFile","input","onchange","async","event","elem","files","text","file","Promise","resolve","reject","reader","readAsText","JSON","parse","fitView","click","downloadJson","FileSaver","stringify","downloadPng","isShowChild","pen","selfPen","parentId","oldPen","showChildIndex","_a","calculative","showChild","children","id","downloadSvg","C2S","MessagePlugin","error","rect","getRect","x","y","ctx","width","height","textBaseline","visible","renderPenRaw","mySerializedSVG","getSerializedSvg","background","urlObject","export_blob","url","setAttribute","evt","initEvent","onUndo","undo","onRedo","redo","onCut","cut","onCopy","copy","onPaste","paste","onAll","activeAll","onDelete","delete","onAddShape","stopPropagation","anchors","lineName","dataTransfer","setData","canvas","addCaches","deepClone","onScaleDefault","centerView","onScaleWindow","onView","stopAnimate","localStorage","setItem","push","path","query","r","Date","now","_id","active","forEach","updateLineType","PenType","Line","setValue","render","graphicGroups","show","list","image","textPosition","textColor","strokeStyle","borderRadius","textTop","dragStart","DragEvent","color","grid","gridSize","gridRotate","gridColor","rule","Object","assign","getOptions","onChangeData","patchFlagsBackground","onChangeOptions","setOptions","patchFlagsTop","selections","useSelection","getPen","globalAlpha","getPenRect","watcher","watch","lineDashs","changeValue","prop","v","lineDash","changeRect","top","bottom","up","down","onUnmounted","save","clearTimeout"],"mappings":"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","x_google_ignoreList":[0]}